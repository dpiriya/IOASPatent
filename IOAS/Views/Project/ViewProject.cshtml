@model IOAS.Models.CreateProjectModel
@{
    ViewBag.Title = "View Project";
    Layout = "~/Views/Shared/_LayoutFluid.cshtml";
}
<script src="@Url.Content("~/Scripts/Project/Project.js")"></script>
<style>
    /* Hide all steps by default: */
    .tab {
        display: none;
        background: #fff;
        float: left;
    }

    .step {
        height: 15px;
        width: 15px;
        margin: 0 2px;
        background-color: #bbbbbb;
        border: none;
        border-radius: 50%;
        display: inline-block;
        opacity: 0.5;
    }

        .step.active {
            opacity: 1;
        }

        /* Mark the steps that are finished and valid: */
        .step.finish {
            background-color: #fff;
        }

    .custom-nav-pills.nav-pills > li > a {
        color: rgba(255,255,255,0.5);
        cursor: default;
        background: transparent !important;
        border-color: transparent;
        border-top-color: transparent;
        padding: 10px 15px;
        margin: 0px 15px;
    }

        .custom-nav-pills.nav-pills > li > a span {
            width: 100%;
            float: left;
        }

    .custom-nav-pills.nav-pills > li.active > a, .custom-nav-pills.nav-pills > li.active > a:focus, .custom-nav-pills.nav-pills > li.active > a:hover {
        color: #333333;
        background-color: #fff !important;
    }

    .custom-st-fd-box {
        background: #f5f5f5;
        padding: 15px 0px;
        border-radius: 4px;
        display: inline-block;
    }

    .custom-st-fd-btn {
        color: #fff;
        font-size: 16px;
        margin-top: 15px;
        display: inline-block;
    }

    .custom-st-tb-th.table {
        border: 0px;
    }

        .custom-st-tb-th.table > tbody > tr > th {
            background: #3080e3;
            color: #fff;
            border: 0px solid #ccc;
        }

        .custom-st-tb-th.table > tbody > tr > td {
            border: 0px;
        }
</style>
<div class="row hd-tt-bg">
    <div class="col-md-4">
        <h3>Project Opening</h3>
    </div>
    @*<div class="col-md-4">
            <div class="search-btn">
                <input type="text" value="" placeholder="Search" class="form-control">
                <a href="#" id="btnsearch" class="btn"> <i class="ion-search"></i></a>
            </div>

        </div>*@
    <div id="addnewpage" class="col-md-8 flt-nav-links">

        <a href="Javascript:void(0)" id="btnFilter" class="pull-right"> <i class="ion-android-funnel"></i>Filters</a>
        <a href="#" id="btnaddnew" data-toggle="modal" data-target="#AddNewEntryModel"> <i class="ion-plus"></i>Add New</a>

    </div>
</div>
<div class="row">
    @*@using (Html.BeginForm("ProjectOpening", "Project", FormMethod.Post, new { @class = "", role = "form", @id = "formPO", enctype = "multipart/form-data" }))

    {*@
        <div class="col-md-12 mt30">

            <div class="page-wrapper" id="projectopening">


                <ul class="nav nav-pills custom-nav-pills">
                    <li class="active"><a href="javascript:void(0)"><span>01</span>Project Details</a></li>
                    <li><a href="javascript:void(0)"><span>02</span>Investigators</a></li>
                    <li><a href="javascript:void(0)"><span>03</span>Agency</a></li>
                    <li><a href="javascript:void(0)"><span>04</span>Categorization</a></li>

                    <li><a href="javascript:void(0)"><span>05</span>Budget</a></li>
                    <li><a href="javascript:void(0)"><span>06</span>Staffs</a></li>

                    <li><a href="javascript:void(0)"><span>07</span>Documents</a></li>
                </ul>
                <div class="tab">
                    <div class="col-md-12 col-sm-12 m-b-sm">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group custom-form-group">
                                    <label>Is SubProject</label>
                                    @Html.CheckBoxFor(m => m.IsSubProject, new { @id = "IsSubProject" })

                                </div>
                            </div>
                            <div id="divMainProject" class="col-md-4 dis-none">
                                <div class="form-group custom-form-group">
                                    <label class="required">Main Project</label>
                                    @Html.DropDownListFor(m => m.MainProjectId, new SelectList(ViewBag.ProjectList, "id", "name"), "Select any",
                               new { @class = "form-control" })
                                    @Html.ValidationMessageFor(m => m.MainProjectId)

                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group custom-form-group">
                                    <label class="required">Financial Year</label>
                                    @Html.DropDownListFor(m => m.FinancialYear, new SelectList(ViewBag.finYearList, "id", "name"), "Select Financial Year",
                               new { @class = "form-control", @required = "required", @id = "finyear" })
                                    @*@Html.TextBoxFor(m => m.FinancialYear, new { @class = "form-control", @required = "required", @id = "finyear" })*@
                                    @* @Html.EditorFor(m => m.Proposalinwarddate, null, "Proposalinwarddate", new { @class = "required form-control", @id = "Prpsalinwarddate" })*@
                                    @Html.ValidationMessageFor(m => m.FinancialYear)

                                </div>
                            </div>
                            <div class="col-md-4" id="Proposalidfield">

                                <div class="form-group custom-form-group ">
                                    <label> Proposal Number </label>
                                    @Html.TextBoxFor(m => m.ProposalNumber, new { @class = "form-control", @required = "required", @id = "propslnum", @onkeypress = "return noedit();", @readonly = true })

                                    @Html.ValidationMessageFor(m => m.ProposalNumber)
                                    @Html.Hidden("ProposalID")
                                    @Html.HiddenFor(m => m.ProposalNumber, new { @id = "HiddenProposalNumber" })
                                </div>

                            </div>
                            <div class="col-md-4" id="Projectidfield">
                                <div class="reg-no">
                                    <div class="form-group custom-form-group ">
                                        <label> Project Number </label>
                                        @Html.TextBoxFor(m => m.ProjectNumber, new { @class = "form-control", @id = "projectnum", @onkeypress = "return noedit();", @readonly = true })

                                        @Html.ValidationMessageFor(m => m.ProjectNumber)

                                        @Html.Hidden("ProjectID")
                                        @Html.Hidden("ProjectNumber")
                                    </div>
                                </div>
                            </div>

                        </div>

                        <div class="row">

                            <div class="col-md-4">
                                <div class="form-group custom-form-group">
                                    <label>Date of Approval</label>
                                    @* @Html.TextBoxFor(m => m.ProposalApprovedDate, new { @class = "form-control", @id = "Prpsalapproveddatepickerid" })
                                        @Html.EditorFor(m => m.ProposalApprovedDate, new { @class = "form-control", @required = "required", @id = "Prpsalapproveddatepickerid", @onkeypress = "return noedit();", @readonly = true })    *@
                                    @Html.EditorFor(m => m.ProposalApprovedDate, new { @class = "form-control", @id = "Prpsalapproveddatepickerid" })
                                    @*@Html.ValidationMessageFor(m => m.ProposalApprovedDate)*@
                                    @Html.Hidden("PrpsalApprovedDate")
                                </div>
                            </div>
                            @*<div class="col-md-4">
                                    <div class="form-group custom-form-group">
                                        <label class="required full-width">Project Duration (Year(s) / Month(s))</label>
                                        @Html.TextBoxFor(m => m.Projectdurationyears, new { @class = "form-control quarter-form", @placeholder = "Year(s)", @required = "required", @id = "projectdurationyear", @onkeypress = "return noedit();", @readonly = true })
                                        @Html.TextBoxFor(m => m.Projectdurationmonths, new { @class = "form-control quarter-form", @placeholder = "Month(s)", @required = "required", @id = "projectdurationmonths", @onkeypress = "return noedit();", @readonly = true })
                                        @Html.ValidationMessageFor(m => m.Projectdurationyears)
                                        @Html.ValidationMessageFor(m => m.Projectdurationmonths)
                                        @Html.Hidden("Projectdurationyears")
                                        @Html.Hidden("Projectdurationmonths")
                                    </div>
                                </div>*@
                            <div class="col-md-4">
                                <div class="form-group custom-form-group">
                                    <label>Sanction Date/Ref. Date/PO Date</label>
                                    @Html.EditorFor(m => m.SanctionOrderDate, null, "SanctionOrderDate", new { @class = "form-control", @id = "SOdatepickerid" })
                                    @Html.ValidationMessageFor(m => m.SanctionOrderDate)
                                    @Html.Hidden("SODate")
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group custom-form-group">
                                    <label>Sanction No./Ref. No./PO. No </label>
                                    @Html.TextBoxFor(m => m.SanctionOrderNumber, new { @class = "form-control", @id = "SOnumber" })
                                    @Html.ValidationMessageFor(m => m.SanctionOrderNumber)
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group custom-form-group ">
                                    <label class="required"> Project title </label>
                                    @Html.TextBoxFor(m => m.Projecttitle, new { @class = "form-control", @required = "required", @id = "prjcttitle" })

                                    @Html.ValidationMessageFor(m => m.Projecttitle)

                                </div>
                            </div>

                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group custom-form-group">
                                    <label class="required">Start Date</label>
                                    @Html.EditorFor(m => m.TentativeStartdate, new { @class = "form-control", @required = "required" })
                                    @Html.ValidationMessageFor(m => m.TentativeStartdate)
                                    @Html.Hidden("TentativestrtDate")
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group custom-form-group">
                                    <label class="required">Close Date</label>
                                    @Html.EditorFor(m => m.TentativeClosedate, new { @class = "form-control", @required = "required", @readonly = "readonly" })
                                    @Html.ValidationMessageFor(m => m.TentativeClosedate)
                                    @Html.Hidden("TentativeclsDate")
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group custom-form-group">
                                    <label class="required">Base Value</label>
                                    @Html.TextBoxFor(m => m.BaseValue, new { @class = "form-control", @id = "basevalue", @onkeypress = "return isNumberKey(event)" })

                                    <div> @Html.ValidationMessageFor(m => m.BaseValue)</div>
                                    @Html.Hidden("BaseValue", null, new { @id = "BaseValueHidden" })
                                </div>
                            </div>
                            @*<div class="col-md-4">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Project Due Date</label>
                                        @Html.EditorFor(m => m.Closedate, new { @class = "form-control", @id = "closedatepickerid", @readonly = "readonly" })
                                        @Html.Hidden("clsDate")
                                        <div> @Html.ValidationMessageFor(m => m.Closedate)</div>
                                    </div>
                                </div>*@
                        </div>
                        <div class="row">

                            <div class="col-md-4">
                                <div class="form-group custom-form-group">
                                    <label class="required">Applicable Tax(%)</label>
                                    @Html.TextBoxFor(m => m.ApplicableTax, new { @class = "form-control", @id = "applicabletax", @onkeypress = "return isNumberKey(event)" })

                                    <div> @Html.ValidationMessageFor(m => m.ApplicableTax)</div>
                                    @Html.Hidden("ApplicableTax", null, new { @id = "ApplicableTaxHidden" })
                                </div>
                            </div>
                            <div class="col-md-4">

                                <div>
                                    <label class="fn-normal">Total Value (Base value + GST)</label>
                                </div>
                                <label id="lblOverallTtl"></label>
                            </div>
                            <div id="divSanctionvalue" class="col-md-4 dis-none">

                                <div>
                                    <label class="fn-normal">Total Sanctioned Value (inclusive of all enhancements)</label>
                                </div>
                                <label id="lblSanctionValue"></label> <br />
                                @Html.Hidden("Sanctionvalue")
                                <a href="javascript:void(0)" data-toggle="modal" id="btnViewEnhancements"> View Details</a>
                            </div>
                        </div>

                        <div class="row" id="JointDevelopment">
                            <div class="col-md-12">
                                <div class="form-group custom-form-group">
                                    <label>
                                        Joint Development with other Companies &nbsp;&nbsp;
                                        @Html.RadioButtonFor(m => m.JointDevelopment_Qust_1, "Yes", new { @id = "Jointdevelop_yes" })<span></span> &nbsp; Yes  &nbsp;&nbsp;
                                        @Html.RadioButtonFor(m => m.JointDevelopment_Qust_1, "No", new { @id = "Jointdevelop_no", @checked = "checked" }) <span></span> &nbsp; No
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="row" id="jointdevelopmentdetail">
                            <div id="divjointdevelopContent">
                                <div class="mt10 mb10">
                                    <div class="col-md-6">
                                        <div class="form-group custom-form-group">
                                            <label>Company Name</label>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="form-group custom-form-group">
                                            <label>Remarks</label>
                                        </div>
                                    </div>
                                </div>

                                <div id="primaryjoindevelopDiv">
                                    <div class="col-md-6">
                                        <div class="form-group custom-form-group">
                                            @Html.TextBox("JointDevelopmentCompany", "", new { @class = "form-control", @id = "jointdevelopmentcompany" })
                                            @Html.Hidden("JointDevelopmentCompanyId")
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="form-group custom-form-group">
                                            @Html.TextBox("JointDevelopmentRemarks", "", new { @class = "form-control", @id = "jointdevelopmentremarks" })
                                        </div>
                                    </div>
                                    <div class="col-md-1">
                                        <button class="dis-none" type="button" name="removeButton"><i class="ion-android-close"></i></button>
                                    </div>
                                </div>

                            </div>
                            <div class="col-md-1">
                                <button type="button" id="btnAddcompany" class="btn-sm"><i class="ion-android-add"></i></button>
                            </div>
                        </div>



                    </div>
                </div>
                <div class="tab">
                    <div class="col-md-12 col-sm-12 mb30">
                        <div class="row">
                            <div class="col-md-12">
                                <h3 class="spl-title">Principal Investigator Details</h3>
                            </div>
                        </div>
                        <div class="row">
                            <label class="col-md-3 fn-normal">Department of PI</label>
                            <label class="col-md-3 fn-normal"> Name of PI </label>
                            <label class="col-md-3 fn-normal"> Email </label>
                            <label class="col-md-1 fn-normal"> PCF(%) </label>
                            <label class="col-md-1 fn-normal"> RMF(%) </label>
                        </div>
                        <div class="row">

                            <div class="col-md-3">
                                @Html.DropDownListFor(m => m.Department, new SelectList(ViewBag.deprtmnt, "code", "name"), "Select department",
                   new { @class = "form-control", @required = "required", @id = "department" })
                                <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.Department)</div>
                                @*@Html.Hidden("Department")*@
                            </div>
                            <div class="col-md-3 bost-sel-ht-sm">
                                @Html.DropDownListFor(m => m.PIname, new SelectList(ViewBag.PI, "id", "name"), "Select Principal Investigator",
                                           new { @class = "form-control selectpicker", @required = "required", @id = "PI" })

                                @Html.ValidationMessageFor(m => m.PIname)
                                @*@Html.Hidden("PIname")*@
                            </div>
                            <div class="col-md-3">
                                @Html.TextBoxFor(m => m.PIEmail, new { @class = "form-control", @id = "PIEmail" })

                                <div> @Html.ValidationMessageFor(m => m.PIEmail)</div>
                                @*@Html.Hidden("PIEmail")*@
                            </div>
                            <div class="col-md-1">
                                @Html.TextBoxFor(m => m.PIPCF, new { @class = "form-control", @id = "PIPCF", @onkeypress = "return ValidateDecimalOnly(event)" })

                                <div> @Html.ValidationMessageFor(m => m.PIPCF)</div>
                            </div>
                            <div class="col-md-1">
                                @Html.TextBoxFor(m => m.PIRMF, new { @class = "form-control", @id = "PIRMF", @onkeypress = "return ValidateDecimalOnly(event)" })

                                <div> @Html.ValidationMessageFor(m => m.PIRMF)</div>
                            </div>
                        </div>

                    </div>
                    <div class="col-md-12 col-sm-12 mb30">
                        <div class="row">
                            <div class="col-md-12">
                                <h3 class="spl-title">Co Investigator Details</h3>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">

                                <div id="divContent">
                                    <div class="row">
                                        <label class="col-md-3 fn-normal">Department of Co PI</label>
                                        <label class="col-md-3 fn-normal"> Name of Co PI </label>
                                        <label class="col-md-3 fn-normal"> Email </label>
                                        <label class="col-md-1 fn-normal"> PCF(%) </label>
                                        <label class="col-md-1 fn-normal"> RMF(%) </label>
                                    </div>

                                    <div class="m-b-sm row" id="primaryDiv">
                                        <div class="col-md-3" id="copidprt">
                                            @Html.DropDownList("CoPIDepartment", new SelectList(ViewBag.deprtmnt, "code", "name"), "Select any", new { @class = "form-control", @id = "copidepartment" })

                                        </div>

                                        <div class="col-md-3 bost-sel-ht-sm" id="copinam">
                                            @Html.DropDownList("CoPIname", new SelectList(ViewBag.PI, "id", "name"), "Select Co-PI",
                                           new { @class = "form-control selectpicker", @id = "CoPI" })
                                            @Html.Hidden("CoPIid")
                                        </div>
                                        <div class="col-md-3" id="copimail">
                                            @Html.TextBox("CoPIEmail", "", new { @class = "form-control", @id = "CoPIEmail" })

                                        </div>
                                        <div class="col-md-1">
                                            @Html.TextBox("CoPIPCF", "", new { @class = "form-control", @id = "CoPIPCF", @onkeypress = "return ValidateDecimalOnly(event)" })
                                            <div> @Html.ValidationMessageFor(m => m.CoPIPCF)</div>

                                        </div>
                                        <div class="col-md-1">
                                            @Html.TextBox("CoPIRMF", "", new { @class = "form-control", @id = "CoPIRMF", @keypress = "return ValidateDecimalOnly(event)" })
                                            <div> @Html.ValidationMessageFor(m => m.CoPIRMF)</div>
                                        </div>
                                        <div class="col-md-1">
                                            <button class="dis-none btn-sm btn btn-danger" type="button" name="removeButton"><i class="ion-android-close"></i></button>
                                        </div>
                                    </div>
                                    <div class="row p-b-sm">
                                        <div class="col-md-12">
                                            <h4 class="text-right">
                                                <button type="button" id="btnAddCoPI" class="btn-primary btn pull-left"><i class="ion-android-add"></i>Add</button>
                                            </h4>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="col-md-12 col-sm-12 mb30">
                        <div class="row">
                            <div class="col-md-12">
                                <h3 class="spl-title">Co Investigator from Other Institute</h3>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">

                                <div id="divotherinstcopiContent">
                                    <div class="row">
                                        <label class="col-md-3 fn-normal">Institute of Co PI</label>
                                        <label class="col-md-3 fn-normal">Department of Co PI</label>
                                        <label class="col-md-3 fn-normal"> Name of Co PI </label>
                                        <label class="col-md-2 fn-normal"> Remarks </label>
                                    </div>

                                    <div class="m-b-sm row" id="primaryotherinstcopiDiv">
                                        <div class="col-md-3">
                                            @Html.TextBox("CoPIInstitute", null, new { @class = "form-control", @id = "copiinstitute" })

                                        </div>

                                        <div class="col-md-3">
                                            @Html.TextBox("OtherInstituteCoPIDepartment", null, new { @class = "form-control", @id = "OtherInstcopidepartment" })
                                        </div>

                                        <div class="col-md-3">
                                            @Html.TextBox("OtherInstituteCoPIName", null, new { @class = "form-control", @id = "OtherinstituteCoPI" })
                                            @Html.Hidden("OtherInstituteCoPIid")
                                        </div>
                                        <div class="col-md-2">
                                            @Html.TextBox("RemarksforOthrInstCoPI", "", new { @class = "form-control", @id = "txtCoPIremarks" })
                                        </div>
                                        <div class="col-md-1">
                                            <button class="dis-none btn-sm btn btn-danger" type="button" name="removeButton"><i class="ion-android-close"></i></button>
                                        </div>
                                    </div>
                                    <div class="row p-b-sm">
                                        <div class="col-md-12">
                                            <h4 class="text-right">
                                                <button type="button" id="btnAddotherinstCoPI" class="btn-primary btn pull-left"><i class="ion-android-add"></i>Add</button>
                                            </h4>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="col-md-12 col-sm-12 mb30">
                        <div class="row">
                            <div class="col-md-12">
                                <h3 class="spl-title">Scientist</h3>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">

                                <div>
                                    <div class="row">
                                        <label class="col-md-3 fn-normal">Name</label>
                                        <label class="col-md-3 fn-normal">Email</label>
                                        <label class="col-md-3 fn-normal">Mobile </label>
                                        <label class="col-md-3 fn-normal">Address</label>
                                    </div>

                                    <div class="m-b-sm row">
                                        <div class="col-md-3">
                                            @Html.TextBox("ScientistName", null, new { @class = "form-control" })

                                        </div>

                                        <div class="col-md-3">
                                            @Html.TextBox("ScientistEmail", null, new { @class = "form-control" })
                                        </div>

                                        <div class="col-md-3">
                                            @Html.TextBox("ScientistMobile", null, new { @class = "form-control" })

                                        </div>
                                        <div class="col-md-3">
                                            @Html.TextBox("ScientistAddress", null, new { @class = "form-control" })
                                        </div>

                                    </div>

                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab">
                    <div class="col-md-12 col-sm-12 mb30">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group custom-form-group">
                                    <label class="required">Agency</label>
                                    @Html.DropDownListFor(m => m.SponsoringAgency, new SelectList(ViewBag.Agency, "id", "name"), "Select Agency",
                               new { @class = "form-control", @required = "required", @id = "Agncy" })
                                    <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.SponsoringAgency)</div>
                                    @*@Html.Hidden("SponsoringAgency")*@
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group custom-form-group">
                                    <label>Agency Code</label>
                                    @Html.TextBoxFor(m => m.AgencyCode, new { @class = "form-control", @id = "txtagencycode", @disabled = "disabled" })
                                    <div> @Html.ValidationMessageFor(m => m.AgencyCode)</div>
                                    @Html.Hidden("AgencyCodeid")
                                    @Html.Hidden("AgencyCode")
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group custom-form-group">
                                    <label>Agency Registered Name</label>
                                    @Html.TextBoxFor(m => m.Agencyregname, new { @class = "form-control", @id = "txtagncyregname", @disabled = "disabled" })
                                    <div>@Html.ValidationMessageFor(m => m.Agencyregname)</div>
                                    @Html.HiddenFor(m => m.Agencyregname, new { @id = "HiddenRegName" })
                                </div>
                            </div>

                        </div>

                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group custom-form-group">
                                    <label>Agency Registered Address</label>
                                    @Html.TextBoxFor(m => m.Agencyregaddress, new { @class = "form-control", @id = "txtagncyregaddrss", @disabled = "disabled" })
                                    @Html.HiddenFor(m => m.Agencyregaddress, new { @id = "HiddenRegAddr" })
                                    <div>@Html.ValidationMessageFor(m => m.Agencyregaddress)</div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group custom-form-group">
                                    <label>Contact Person</label>
                                    @Html.TextBoxFor(m => m.Agencycontactperson, new { @class = "form-control", @id = "txtagncyconperson", @disabled = "disabled" })
                                    @Html.HiddenFor(m => m.Agencycontactperson, new { @id = "HiddenContactPerson" })
                                    <div> @Html.ValidationMessageFor(m => m.Agencycontactperson)</div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group custom-form-group">
                                    <label>Designation</label>
                                    @Html.TextBoxFor(m => m.Agencycontactpersondesignation, new { @class = "form-control", @id = "txtagncycntctdesig" })
                                    <div> @Html.ValidationMessageFor(m => m.Agencycontactpersondesignation)</div>

                                </div>
                            </div>

                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group custom-form-group">
                                    <label>Email Id</label>
                                    @Html.TextBoxFor(m => m.AgencycontactpersonEmail, new { @class = "form-control", @id = "txtcntctpersonemail", @disabled = "disabled" })
                                    @Html.HiddenFor(m => m.AgencycontactpersonEmail, new { @id = "HiddenContactEmail" })
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group custom-form-group">
                                    <label>Contact Number</label>
                                    @Html.TextBoxFor(m => m.Agencycontactpersonmobile, new { @class = "form-control", @id = "txtcntctpersonmobile", @disabled = "disabled" })
                                    @Html.HiddenFor(m => m.Agencycontactpersonmobile, new { @id = "HiddenContactMobile" })
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group custom-form-group">
                                    <label>Contact Address</label>
                                    @Html.TextBoxFor(m => m.Agencycontactpersonaddress, new { @class = "form-control", @id = "txtcntctpersonaddress", @disabled = "disabled" })
                                    @Html.HiddenFor(m => m.Agencycontactpersonaddress, new { @id = "HiddenContactAddr" })
                                </div>
                            </div>

                        </div>


                        <div class="row" id="constaxdetails">

                            <div class="col-md-3" id="taxdetails">
                                <div class="form-group custom-form-group">
                                    <label class="required">Tax Status</label>
                                    @Html.DropDownList("ConsProjectTaxType_Qust_1", new SelectList(ViewBag.constaxtype, "codevalAbbr", "CodeValDetail"), "Select tax status",
                   new { @class = "form-control", @id = "constaxtype" })
                                    @*<label class="radio chkbox-adj mbnull"> @Html.RadioButtonFor(m => m.ConsProjectTaxType_Qust_1, "Taxable", new { @id = "ConsProjecttaxtype_taxable" })<span></span> &nbsp; Taxable </label>
                                        <label class="radio chkbox-adj mbnull"> @Html.RadioButtonFor(m => m.ConsProjectTaxType_Qust_1, "Non Taxable", new { @id = "ConsProjecttaxtype_nontaxable" }) <span></span> &nbsp; Non Taxable </label>
                                        <label class="radio chkbox-adj mbnull"> @Html.RadioButtonFor(m => m.ConsProjectTaxType_Qust_1, "Tax Exempted", new { @id = "ConsProjecttaxtype_exempted" }) <span></span> &nbsp; Tax Exempted </label>*@

                                    <div> @Html.ValidationMessageFor(m => m.ConsProjectTaxType_Qust_1)</div>
                                </div>
                            </div>

                            <div class="col-md-5" id="reasonfornotax">
                                <div class="form-group custom-form-group ">
                                    <label class="required"> Reason </label>

                                    @Html.TextBoxFor(m => m.ConsProjectReasonfornotax, new { @class = "form-control", @id = "txtreasonfornotax" })

                                    @Html.ValidationMessageFor(m => m.ConsProjectReasonfornotax)

                                </div>
                            </div>

                            <div class="col-md-3" id="proofofnotax">
                                <div class="form-group custom-form-group">
                                    <label class="required"> Proof (pdf, doc, docx) </label>
                                    <input type="file" name="taxprooffile" id="proofdocfile" />&nbsp;&nbsp;&nbsp;
                                    @*@Html.ValidationMessageFor(m => m.Docpathfornotax)*@

                                </div>
                            </div>
                            <div id="proofofnotaxlink" class="col-md-1">
                                <div class="form-group custom-form-group">
                                    <label class="mt20">  </label>
                                    <a href="#" class="prooflink" target="_blank"></a>
                                    @Html.Hidden("Docpathfornotax")
                                    @Html.Hidden("TaxException")
                                </div>
                            </div>
                        </div>
                        <div class="row" id="taxnumberdtls">
                            <div class="col-md-4">
                                <div class="form-group custom-form-group ">
                                    <label> GSTIN </label>
                                    @Html.TextBoxFor(m => m.GSTNumber, new { @class = "form-control", @id = "gstnumbr", @disabled = "disabled" })
                                    @Html.HiddenFor(m => m.GSTNumber, new { @id = "HiddenGST" })
                                    @Html.ValidationMessageFor(m => m.GSTNumber)

                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="form-group custom-form-group ">
                                    <label> PAN </label>
                                    @Html.TextBoxFor(m => m.PAN, new { @class = "form-control", @id = "panumbr", @disabled = "disabled" })
                                    @Html.HiddenFor(m => m.PAN, new { @id = "HiddenPAN" })
                                    @Html.ValidationMessageFor(m => m.PAN)

                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group custom-form-group ">
                                    <label> TAN </label>
                                    @Html.TextBoxFor(m => m.TAN, new { @class = "form-control", @id = "tanumbr", @disabled = "disabled" })
                                    @Html.HiddenFor(m => m.TAN, new { @id = "HiddenTAN" })
                                    @Html.ValidationMessageFor(m => m.TAN)

                                </div>
                            </div>
                        </div>
                        <div class="row" id="constaxservicemode">
                            <div class="col-md-4">
                                <div class="form-group custom-form-group ">
                                    <label class="required"> Tax Service </label>
                                    @Html.DropDownListFor(m => m.constaxservice, new SelectList(ViewBag.taxservice, "codevalAbbr", "CodeValDetail"), "Select service mode",
        new { @class = "form-control", @id = "taxservice" })
                                    @Html.ValidationMessageFor(m => m.constaxservice)
                                </div>
                            </div>
                            <div class="col-md-4" id="taxregistatus">
                                <div class="form-group custom-form-group ">
                                    <label class="required"> Registration Status </label>
                                    @Html.DropDownListFor(m => m.Taxserviceregstatus, new SelectList(ViewBag.taxregstatus, "codevalAbbr", "CodeValDetail"), "Select service mode",
        new { @class = "form-control", @id = "taxserviceregstatus" })
                                    @Html.ValidationMessageFor(m => m.Taxserviceregstatus)
                                    @*@Html.Hidden("IndTaxService")*@
                                    @Html.HiddenFor(m => m.IndTaxService)
                                </div>
                            </div>

                            @*<div class="col-md-4" id="constaxservicegst">
                                    <div class="form-group custom-form-group ">
                                        <label class="required"> GSTIN </label>
                                        @Html.TextBoxFor(m => m.TaxserviceGST, new { @class = "form-control", @id = "taxserviceGSTnum" })

                                    </div>
                                </div>*@

                            <div class="col-md-4" id="indprojectstate">
                                <div class="form-group custom-form-group">
                                    <label class="required">State of funding agency</label>
                                    @Html.TextBoxFor(m => m.indfundngagncystate, new { @class = "form-control", @id = "indfndgagncystate" })


                                    @Html.ValidationMessageFor(m => m.indfundngagncystate)

                                </div>
                            </div>
                            <div class="col-md-4" id="indprojectlocation">
                                <div class="form-group custom-form-group">
                                    <label class="required">Location of Funding Agency</label>
                                    @Html.TextBoxFor(m => m.indfundngagncylocation, new { @class = "form-control", @id = "indfndngagncylocation" })

                                    @Html.ValidationMessageFor(m => m.indfundngagncylocation)

                                </div>
                            </div>


                            <div class="col-md-3" id="forignprojectcntry">
                                <div class="form-group custom-form-group">
                                    <label class="required">Country</label>
                                    @Html.DropDownListFor(m => m.forgnfndngagncycountry, new SelectList(ViewBag.country, "CountryID", "CountryName"), "Select country",
        new { @class = "form-control", @id = "forgnfndngagncycntry" })
                                    @Html.ValidationMessageFor(m => m.forgnfndngagncycountry)
                                </div>
                            </div>
                            <div class="col-md-3" id="forignprojectstate">
                                <div class="form-group custom-form-group">
                                    <label class="required">State</label>
                                    @Html.TextBoxFor(m => m.forgnfundngagncystate, new { @class = "form-control", @id = "forgnfndngagncystate" })

                                    <div> @Html.ValidationMessageFor(m => m.forgnfundngagncystate)</div>
                                </div>
                            </div>
                            <div class="col-md-3" id="forignprojectlocation">
                                <div class="form-group custom-form-group">
                                    <label class="required">Location</label>
                                    @Html.TextBoxFor(m => m.forgnfundngagncylocation, new { @class = "form-control", @id = "forgnfndngagncylocation" })

                                    <div> @Html.ValidationMessageFor(m => m.forgnfundngagncylocation)</div>
                                </div>
                            </div>
                        </div>
                        <div class="row">

                            <div class="col-md-12">
                                <div class="form-group custom-form-group">
                                    <label>Remarks</label>
                                    @Html.TextBoxFor(m => m.Remarks, new { @class = "form-control", @id = "txtremarks" })

                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="tab">
                    <div class="col-md-12 col-sm-12 m-b-sm">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group custom-form-group">
                                    <label class="required">Project Type</label>
                                    @Html.TextBoxFor(m => m.ProjectTypeName, new { @class = "form-control", @required = "required", @id = "Projecttypename", @onkeypress = "return noedit();", @readonly = true })

                                    @Html.Hidden("Prjcttype")
                                    @Html.Hidden("ProjectType")
                                    @Html.HiddenFor(m => m.ProjectTypeName)
                                    @Html.HiddenFor(m => m.OverheadPercentage)
                                    <div> @Html.ValidationMessageFor(m => m.ProjectTypeName)</div>
                                </div>
                            </div>
                            @*<div class="col-md-4">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Project Input Date</label>
                                        @Html.EditorFor(m => m.Inputdate,null, "Inputdate", new { @class = "form-control", @id = "inputdatepickerid" })
                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.Inputdate)</div>
                                        @Html.Hidden("Inptdate")
                                    </div>
                                </div>*@
                            <div class="col-md-4">
                                <div class="form-group custom-form-group">
                                    <label class="required">Type of Project</label>
                                    @Html.DropDownListFor(m => m.TypeofProject, new SelectList(ViewBag.typeofproject, "codevalAbbr", "CodeValDetail"), "Select type of project",
            new { @class = "form-control", @required = "required", @id = "typeofproject" })
                                    <div> @Html.ValidationMessageFor(m => m.TypeofProject)</div>
                                </div>
                            </div>
                            <div class="col-md-4" id="CollabType">
                                <div class="form-group custom-form-group">
                                    <label class="required">Project Type</label>
                                    @Html.DropDownListFor(m => m.CollaborativeProjectType, new SelectList(ViewBag.fundingtypeWOBoth, "codevalAbbr", "CodeValDetail"), "Select any",
                               new { @class = "form-control" })

                                    <div> @Html.ValidationMessageFor(m => m.CollaborativeProjectType)</div>
                                </div>
                            </div>

                        </div>
                        <div class="row">
                            <div class="col-md-4" id="CollabCoordinator">
                                <div class="form-group custom-form-group">
                                    <label class="required">Name of the Coordinator</label>
                                    @Html.TextBoxFor(m => m.Collaborativeprojectcoordinator, new { @class = "form-control", @id = "collabcoordname" })

                                    <div> @Html.ValidationMessageFor(m => m.Collaborativeprojectcoordinator)</div>
                                </div>
                            </div>
                            <div class="col-md-4" id="CollabAgency">
                                <div class="form-group custom-form-group">
                                    <label class="required">Insitute / Industry name</label>
                                    @Html.TextBoxFor(m => m.CollaborativeprojectAgency, new { @class = "form-control", @id = "collabagency" })
                                    <div> @Html.ValidationMessageFor(m => m.CollaborativeprojectAgency)</div>
                                </div>
                            </div>
                            <div class="col-md-4" id="CollabCoordinatorEmail">
                                <div class="form-group custom-form-group">
                                    <label>Email</label>
                                    @Html.TextBoxFor(m => m.Collaborativeprojectcoordinatoremail, new { @class = "form-control", @id = "collabcoordemail" })
                                    <div> @Html.ValidationMessageFor(m => m.Collaborativeprojectcoordinatoremail)</div>
                                </div>
                            </div>

                        </div>
                        <div class="row">
                            <div class="col-md-4" id="TotalCost">
                                <div class="form-group custom-form-group">
                                    <label class="required">Other Insitute / Industry Share</label>
                                    @Html.TextBoxFor(m => m.Collaborativeprojecttotalcost, new { @class = "form-control", @id = "collabtotalcost", @onkeypress = "return isNumberKey(event)" })
                                    <div> @Html.ValidationMessageFor(m => m.Collaborativeprojecttotalcost)</div>
                                </div>
                            </div>
                            <div class="col-md-4" id="IITMCost">
                                <div class="form-group custom-form-group">
                                    <label class="required">IITM Share</label>
                                    @Html.TextBoxFor(m => m.CollaborativeprojectIITMCost, new { @class = "form-control", @id = "collabIITMCost", @onkeypress = "return isNumberKey(event)" })
                                    <div> @Html.ValidationMessageFor(m => m.CollaborativeprojectIITMCost)</div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-12 col-sm-12 m-b-sm" id="prjcttypespon">
                            <div class="row">
                                <div class="col-md-12">
                                    <h3 class="spl-title"> Project type: Sponsored</h3>

                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group custom-form-group ">
                                        <label class="required"> Project Account Type </label>
                                        @*@Html.Hidden("ProjectSubType")*@

                                        @Html.DropDownListFor(m => m.ProjectSubType, new SelectList(ViewBag.projectsponsubtype, "codevalAbbr", "CodeValDetail"), "Select Project Subtype",
                               new { @class = "form-control", @id = "pjctsubtyp" })
                                        @Html.ValidationMessageFor(m => m.ProjectSubType)

                                    </div>
                                </div>
                                <div class="col-md-4 dis-none" id="sponextrnlscheme">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Scheme</label>
                                        @Html.DropDownListFor(m => m.Schemename, new SelectList(ViewBag.Scheme, "id", "name"), "Select Scheme",
                               new { @class = "form-control", @id = "schemename" })

                                        @Html.ValidationMessageFor(m => m.Schemename)
                                        @*@Html.Hidden("Schemename")*@
                                    </div>
                                </div>
                                <div class="col-md-4 dis-none" id="sponextrnlschemecode">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Scheme Code</label>
                                        @*@Html.TextBoxFor(m => m.SchemeCode, new { @class = "form-control", @id = "schemecode", @disabled = "disabled" })*@
                                        @Html.DropDownListFor(m => m.SchemeCode, new SelectList(ViewBag.schemeCodeList, "id", "name"), "Select Scheme Code",
                               new { @class = "form-control", @id = "schemecode" })
                                        @Html.ValidationMessageFor(m => m.SchemeCode)
                                        @*@Html.Hidden("SchemeCode")*@
                                    </div>
                                </div>
                                <div class="col-md-4 dis-none" id="internalagency">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Internal Funding Agency</label>
                                        @Html.DropDownList("InternalSchemeFundingAgency", new SelectList(ViewBag.internalfundingagency, "id", "name"), "Select Funding Agency",
                               new { @class = "form-control", @id = "internalschemeagency" })
                                        <div> @Html.ValidationMessageFor(m => m.InternalSchemeFundingAgency)</div>
                                        @*@Html.Hidden("InternalSchemeFundingAgency")*@
                                    </div>
                                </div>
                                @*<div class="col-md-4 dis-none" id="sponextrnlscheme">
                                        <div class="form-group custom-form-group">
                                            <label class="required">Scheme</label>
                                            @Html.TextBoxFor(m => m.ExternalSchemename, new { @class = "form-control", @id = "externalschemename" })

                                            @Html.ValidationMessageFor(m => m.ExternalSchemename)

                                        </div>
                                    </div>*@
                            </div>

                            <div class="row dis-none" id="prjctdetails1">
                                <div class="col-md-4">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Project Funding Type</label><br>
                                        @Html.DropDownListFor(m => m.ProjectFundingType_Qust_1, new SelectList(ViewBag.fundingtype, "codevalAbbr", "CodeValDetail"), "Select any",
                               new { @class = "form-control", @id = "prjctfundingtype" })
                                        <div> @Html.ValidationMessageFor(m => m.ProjectFundingType_Qust_1)</div>

                                        @Html.Hidden("GovAndBoth")
                                        @Html.Hidden("ForgnGovAndBoth")
                                        @Html.Hidden("ForgnNonGovAndBoth")
                                        @Html.Hidden("NonGovAndBoth")
                                        @Html.Hidden("IndAndBoth")
                                        @Html.Hidden("ForgnAndBoth")
                                        @Html.Hidden("IndGovFund_MHRD")
                                        @Html.Hidden("IndGovFund_Mnstry")
                                        @Html.Hidden("IndGovFund_Univ")
                                        @Html.Hidden("IndNonGovFund_Indus")
                                        @Html.Hidden("IndNonGovFund_Univ")
                                        @Html.Hidden("IndNonGovFund_Other")
                                        @Html.Hidden("ForgnGovFund_Dep")
                                        @Html.Hidden("ForgnGovFund_Univ")
                                        @Html.Hidden("ForgnGovFund_Other")
                                        @Html.Hidden("ForgnNonGovFund_Dep")
                                        @Html.Hidden("ForgnNonGovFund_Univ")
                                        @Html.Hidden("ForgnNonGovFund_Other")
                                    </div>
                                </div>
                                <div class="col-md-4 dis-none" id="indprjctcategory_1">
                                    <div class="form-group custom-form-group">
                                        <label class="required "> Project Category </label><br>
                                        @Html.DropDownListFor(m => m.Projectcatgry_Qust_1, new SelectList(ViewBag.sponprojectcategory, "codevalAbbr", "CodeValDetail"), "Select Project Category",
                               new { @class = "form-control", @id = "projectcategory" })
                                        <div> @Html.ValidationMessageFor(m => m.Projectcatgry_Qust_1)</div>
                                        @*@Html.Hidden("Projectcatgry_Qust_1")*@
                                    </div>
                                </div>
                                @* if Funding type is selected as Indian*@
                                <div class="col-md-4" id="indprjctfundedby_1">
                                    <div class="form-group custom-form-group">
                                        <label class="required "> Indian Project Funded By </label><br>
                                        @Html.DropDownListFor(m => m.ProjectFundedby_Qust_1, new SelectList(ViewBag.fundedby, "codevalAbbr", "CodeValDetail"), "Select any",
                               new { @class = "form-control", @id = "prjctfundedby" })
                                        <div> @Html.ValidationMessageFor(m => m.ProjectFundedby_Qust_1)</div>
                                    </div>
                                </div>

                                @* if Funding type is selected as Foreign*@
                                <div class="col-md-4" id="forgnprjctfundedby_1">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Foreign Project Funded By</label><br>
                                        @Html.DropDownListFor(m => m.ForgnProjectFundedby_Qust_1, new SelectList(ViewBag.fundedby, "codevalAbbr", "CodeValDetail"), "Select any",
                               new { @class = "form-control", @id = "prjctforeignfundedby" })
                                        <div> @Html.ValidationMessageFor(m => m.ForgnProjectFundedby_Qust_1)</div>
                                    </div>
                                </div>

                                <div class="col-md-4 forgnPrjctDet">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Foreign Currency</label><br>
                                        @Html.DropDownListFor(m => m.SelCurr, new SelectList(ViewBag.Currency, "id", "name"), "Select any",
                               new { @class = "form-control" })
                                        <div> @Html.ValidationMessageFor(m => m.SelCurr)</div>
                                    </div>
                                </div>
                                <div class="col-md-4 forgnPrjctDet">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Conversion rate</label><br>
                                        @Html.TextBoxFor(m => m.ConversionRate, new { @class = "form-control", @onkeypress = "return isNumberKey(event)" })
                                        <div> @Html.ValidationMessageFor(m => m.ConversionRate)</div>
                                    </div>
                                </div>
                                @* if Funding type is selected as Indian and funded by is selected as government*@

                                <div class="col-md-4" id="indprjctfundbodygovt_1">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Indian Government Funding Body</label><br>
                                        @Html.DropDownListFor(m => m.IndProjectFundingGovtBody_Qust_1, new SelectList(ViewBag.indfundinggovtbody, "codevalAbbr", "CodeValDetail"),
                               new { @class = "form-control selectpicker", @id = "Indfundgovtbody", @multiple = "multiple", @title = "Select any" })

                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.IndProjectFundingGovtBody_Qust_1)</div>
                                        @*@Html.Hidden("IndProjectFundingGovtBodyId")*@
                                    </div>
                                </div>
                                @* if Funding type is selected as Indian and funded by is selected as non government*@
                                <div class="col-md-4" id="indprjctfundbodynongovt_1">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Indian Non Government Funding Body</label><br>

                                        @Html.DropDownListFor(m => m.IndProjectFundingNonGovtBody_Qust_1, new SelectList(ViewBag.indfundingnongovtbody, "codevalAbbr", "CodeValDetail"),
                               new { @class = "form-control selectpicker", @id = "Indfundnongovtbody", @multiple = "multiple", @title = "Select any" })

                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.IndProjectFundingNonGovtBody_Qust_1)</div>
                                        @*@Html.Hidden("IndProjectFundingNonGovtBodyId")*@
                                    </div>
                                </div>

                                @* if Funding type is selected as Foreign and funded by is selected as government*@
                                <div class="col-md-4" id="forgnprjctfundbodygovt_1">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Foreign Government Funding Body</label><br>
                                        @Html.DropDownListFor(m => m.ForgnProjectFundingGovtBody_Qust_1, new SelectList(ViewBag.forgnfundinggovtbody, "codevalAbbr", "CodeValDetail"),
                               new { @class = "form-control selectpicker", @id = "Forgnfundgovtbody", @multiple = "multiple", @title = "Select any" })

                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.ForgnProjectFundingGovtBody_Qust_1)</div>
                                        @*@Html.Hidden("ForgnProjectFundingGovtBodyId")*@
                                    </div>
                                </div>
                                @* if Funding type is selected as Foreign and funded by is selected as non government*@
                                <div class="col-md-4" id="forgnprjctfundbodynongovt_1">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Foreign Non Government Funding Body</label><br>
                                        @Html.DropDownListFor(m => m.ForgnProjectFundingNonGovtBody_Qust_1, new SelectList(ViewBag.forgnfundingnongovtbody, "codevalAbbr", "CodeValDetail"),
                               new { @class = "form-control selectpicker", @id = "Forgnfundnongovtbody", @multiple = "multiple", @title = "Select any" })

                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.ForgnProjectFundingNonGovtBody_Qust_1)</div>
                                        @*@Html.Hidden("ForgnProjectFundingNonGovtBodyId")*@
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                @* if Funding type is selected as Indian and funded by is selected as government and funding body is selected as MHRD *@
                                <div class="col-md-5" id="indprjctfundbodygovtagncydeptnam_1">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Indian Government Department</label><br>
                                        @Html.TextBoxFor(m => m.indprjctfundbodygovt_Agencydeptname, new { @class = "form-control", @id = "indprjctfundbodygovt_Agencydeptname" })


                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.indprjctfundbodygovt_Agencydeptname)</div>
                                    </div>
                                </div>
                                <div class="col-md-4" id="indprjctfundbodygovtdeptamt_1">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Indian Govt. Department Amount</label><br>
                                        @Html.TextBoxFor(m => m.indprjctfundbodygovt_deptAmount, new { @class = "form-control", @id = "indprjctfundbodygovt_deptAmount", @onkeypress = "return isNumberKey(event)" })


                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.indprjctfundbodygovt_deptAmount)</div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                @* if Funding type is selected as Indian and funded by is selected as government and funding body is selected as ministry *@
                                <div class="col-md-5" id="indprjctfundbodygovtagncymnstrynam_1">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Indian Government Ministry</label><br>
                                        @Html.DropDownListFor(m => m.indprjctfundbodygovt_Agencymnstryname, new SelectList(ViewBag.ministry, "id", "name"), "Select Ministry",
                                           new { @class = "form-control", @id = "indprjctfundbodygovt_Agencymnstryname" })

                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.indprjctfundbodygovt_Agencymnstryname)</div>
                                    </div>
                                </div>
                                <div class="col-md-4" id="indprjctfundbodygovtmnstryamt_1">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Indian Government Ministry Amount</label><br>
                                        @Html.TextBoxFor(m => m.indprjctfundbodygovt_mnstryAmount, new { @class = "form-control", @id = "indprjctfundbodygovt_mnstryAmount", @onkeypress = "return isNumberKey(event)" })


                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.indprjctfundbodygovt_mnstryAmount)</div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                @* if Funding type is selected as Indian and funded by is selected as government and funding body is selected as University *@
                                <div class="col-md-5" id="indprjctfundbodygovtunivnam_1">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Indian Government University</label><br>
                                        @Html.TextBoxFor(m => m.indprjctfundbodygovt_Agencyunivname, new { @class = "form-control", @id = "indprjctfundbodygovt_Agencyunivname" })

                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.indprjctfundbodygovt_Agencyunivname)</div>
                                    </div>
                                </div>
                                <div class="col-md-4" id="indprjctfundbodygovtunivamt_1">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Indian Government University Amount</label><br>
                                        @Html.TextBoxFor(m => m.indprjctfundbodygovt_univAmount, new { @class = "form-control", @id = "indprjctfundbodygovt_univAmount", @onkeypress = "return isNumberKey(event)" })


                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.indprjctfundbodygovt_univAmount)</div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                @* if Funding type is selected as Indian and funded by is selected as non government and funding body is selected as Industry *@
                                <div class="col-md-5" id="indprjctfundbodynongovtagncyindstrynam_1">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Indian Non Government Industry</label><br>
                                        @Html.TextBoxFor(m => m.indprjctfundbodynongovt_AgencyIndstryname, new { @class = "form-control", @id = "indprjctfundbodynongovt_AgencyIndstryname" })


                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.indprjctfundbodynongovt_AgencyIndstryname)</div>
                                    </div>
                                </div>
                                <div class="col-md-4" id="indprjctfundbodynongovtindstryamt_1">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Indian Non Govt. Industry Amount</label><br>
                                        @Html.TextBoxFor(m => m.indprjctfundbodynongovt_IndstryAmount, new { @class = "form-control", @id = "indprjctfundbodynongovt_IndstryAmount", @onkeypress = "return isNumberKey(event)" })


                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.indprjctfundbodynongovt_IndstryAmount)</div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                @* if Funding type is selected as Indian and funded by is selected as non government and funding body is selected as University *@
                                <div class="col-md-5" id="indprjctfundbodynongovtunivnam_1">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Indian Non Government University</label><br>
                                        @Html.TextBoxFor(m => m.indprjctfundbodynongovt_Agencyunivname, new { @class = "form-control", @id = "indprjctfundbodynongovt_Agencyunivname" })

                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.indprjctfundbodynongovt_Agencyunivname)</div>
                                    </div>
                                </div>
                                <div class="col-md-4" id="indprjctfundbodynongovtunivamt_1">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Indian Non Govt Univ. Amount</label><br>
                                        @Html.TextBoxFor(m => m.indprjctfundbodynongovt_univAmount, new { @class = "form-control", @id = "indprjctfundbodynongovt_univAmount", @onkeypress = "return isNumberKey(event)" })

                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.indprjctfundbodynongovt_univAmount)</div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                @* if Funding type is selected as Indian and funded by is selected as non government and funding body is selected as Others *@
                                <div class="col-md-5" id="indprjctfundbodynongovtagncyothersnam_1">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Indian Non Government Agency</label><br>
                                        @Html.TextBoxFor(m => m.indprjctfundbodynongovt_Agencyothersname, new { @class = "form-control", @id = "indprjctfundbodynongovt_Agencyothersname" })

                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.indprjctfundbodynongovt_Agencyothersname)</div>
                                    </div>
                                </div>
                                <div class="col-md-4" id="indprjctfundbodynongovtothersamt_1">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Indian Non Govt. Agency Amount</label><br>
                                        @Html.TextBoxFor(m => m.indprjctfundbodynongovt_othersAmount, new { @class = "form-control", @id = "indprjctfundbodynongovt_othersAmount", @onkeypress = "return isNumberKey(event)" })


                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.indprjctfundbodynongovt_othersAmount)</div>
                                    </div>
                                </div>

                            </div>

                            @* if Funding type is selected as Foreign and funded by is selected as government and funding body is selected as Department *@



                            @* if Funding type is selected as Foreign and funded by is selected as government and funding body is selected as Department *@
                            <div class="row">

                                <div class="col-md-4" id="forgnprjctfundbodygovtagncydeptnam_1">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Foreign Government Department</label><br>
                                        @Html.TextBoxFor(m => m.forgnprjctfundbodygovt_Agencydeptname, new { @class = "form-control", @id = "forgnprjctfundbodygovt_Agencydeptname" })


                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.forgnprjctfundbodygovt_Agencydeptname)</div>
                                    </div>
                                </div>
                                <div class="col-md-4" id="forgnprjctfundbodygovtcntry_1">

                                    <div class="form-group custom-form-group">
                                        <label class="required">Country</label><br>
                                        @Html.DropDownListFor(m => m.forgnprjctfundbodygovt_country, new SelectList(ViewBag.country, "CountryID", "CountryName"), "Select Country",
                                           new { @class = "form-control", @id = "forgnprjctfundbodygovt_country" })
                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.forgnprjctfundbodygovt_country)</div>
                                    </div>

                                </div>
                                <div class="col-md-4" id="forgnprjctfundbodygovtdeptamt_1">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Foreign Govt. Department Amount</label><br>
                                        @Html.TextBoxFor(m => m.forgnprjctfundbodygovt_deptAmount, new { @class = "form-control", @id = "forgnprjctfundbodygovt_Agencydeptamt", @onkeypress = "return isNumberKey(event)" })


                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.forgnprjctfundbodygovt_deptAmount)</div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                @* if Funding type is selected as Foreign and funded by is selected as government and funding body is selected as University *@

                                <div class="col-md-4" id="forgnprjctfundbodygovtagncyunivnam_1">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Foreign Government University</label><br>
                                        @Html.TextBoxFor(m => m.forgnprjctfundbodygovt_Agencyunivname, new { @class = "form-control", @id = "forgnprjctfundbodygovt_Agencyunivname" })


                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.forgnprjctfundbodygovt_Agencyunivname)</div>
                                    </div>
                                </div>
                                <div class="col-md-4" id="forgnprjctfundbodygovtunivcntry_1">

                                    <div class="form-group custom-form-group">
                                        <label class="required">Country</label><br>
                                        @Html.DropDownListFor(m => m.forgnprjctfundbodygovt_univcountry, new SelectList(ViewBag.country, "CountryID", "CountryName"), "Select Country",
                                           new { @class = "form-control", @id = "forgnprjctfundbodygovt_univcountry" })
                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.forgnprjctfundbodygovt_univcountry)</div>
                                    </div>

                                </div>
                                <div class="col-md-4" id="forgnprjctfundbodygovtunivamt_1">
                                    <div class="form-group custom-form-group">

                                        <label class="required">Foreign Govt. Univ. Amount</label><br>
                                        @Html.TextBoxFor(m => m.forgnprjctfundbodygovt_univAmount, new { @class = "form-control", @id = "forgnprjctfundbodygovt_univAmount", @onkeypress = "return isNumberKey(event)" })


                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.forgnprjctfundbodygovt_univAmount)</div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                @* if Funding type is selected as Foreign and funded by is selected as government and funding body is selected as Others *@

                                <div class="col-md-4" id="forgnprjctfundbodygovtagncyothrsnam_1">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Foreign Government Agency</label><br>
                                        @Html.TextBoxFor(m => m.forgnprjctfundbodygovt_othersagncyname, new { @class = "form-control", @id = "forgnprjctfundbodygovt_othersagncyname" })


                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.forgnprjctfundbodygovt_othersagncyname)</div>
                                    </div>
                                </div>
                                <div class="col-md-4" id="forgnprjctfundbodygovtothrscntry_1">

                                    <div class="form-group custom-form-group">
                                        <label class="required">Country</label><br>
                                        @Html.DropDownListFor(m => m.forgnprjctfundbodygovt_otherscountry, new SelectList(ViewBag.country, "CountryID", "CountryName"), "Select Country",
                                           new { @class = "form-control", @id = "forgnprjctfundbodygovt_otherscountry" })
                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.forgnprjctfundbodygovt_otherscountry)</div>
                                    </div>

                                </div>
                                <div class="col-md-4" id="forgnprjctfundbodygovtothrsamt_1">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Foreign Govt. Agency Amount</label><br>
                                        @Html.TextBoxFor(m => m.forgnprjctfundbodygovt_othersAmount, new { @class = "form-control", @id = "forgnprjctfundbodygovt_othersAmount", @onkeypress = "return isNumberKey(event)" })


                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.forgnprjctfundbodygovt_othersAmount)</div>
                                    </div>
                                </div>

                            </div>
                            <div class="row">
                                @* if Funding type is selected as Foreign and funded by is selected as non government and funding body is selected as Department *@


                                <div class="col-md-4" id="forgnprjctfundbodynongovtagncydeptnam_1">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Foreign Non Government Department</label><br>
                                        @Html.TextBoxFor(m => m.forgnprjctfundbodynongovt_Agencydeptname, new { @class = "form-control", @id = "forgnprjctfundbodynongovt_Agencydeptname" })


                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.forgnprjctfundbodynongovt_Agencydeptname)</div>
                                    </div>
                                </div>
                                <div class="col-md-4" id="forgnprjctfundbodynongovtcntry_1">

                                    <div class="form-group custom-form-group">
                                        <label class="required">Country</label><br>
                                        @Html.DropDownListFor(m => m.forgnprjctfundbodynongovt_country, new SelectList(ViewBag.country, "CountryID", "CountryName"), "Select Country",
                                           new { @class = "form-control", @id = "forgnprjctfundbodynongovt_country" })
                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.forgnprjctfundbodynongovt_country)</div>
                                    </div>

                                </div>
                                <div class="col-md-4" id="forgnprjctfundbodynongovtdeptamt_1">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Foreign Non Govt. Dept. Amount</label><br>
                                        @Html.TextBoxFor(m => m.forgnprjctfundbodynongovt_deptAmount, new { @class = "form-control", @id = "forgnprjctfundbodynongovt_deptAmount", @onkeypress = "return isNumberKey(event)" })


                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.forgnprjctfundbodynongovt_deptAmount)</div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                @* if Funding type is selected as Foreign and funded by is selected as government and funding body is selected as University *@

                                <div class="col-md-4" id="forgnprjctfundbodynongovtagncyunivnam_1">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Foreign Non Government University</label><br>
                                        @Html.TextBoxFor(m => m.forgnprjctfundbodynongovt_Agencyunivname, new { @class = "form-control", @id = "forgnprjctfundbodynongovt_Agencyunivname" })


                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.forgnprjctfundbodynongovt_Agencyunivname)</div>
                                    </div>
                                </div>
                                <div class="col-md-4" id="forgnprjctfundbodynongovtunivcntry_1">

                                    <div class="form-group custom-form-group">
                                        <label class="required">Country</label><br>
                                        @Html.DropDownListFor(m => m.forgnprjctfundbodynongovt_univcountry, new SelectList(ViewBag.country, "CountryID", "CountryName"), "Select Country",
                                           new { @class = "form-control", @id = "forgnprjctfundbodynongovt_univcountry" })
                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.forgnprjctfundbodynongovt_univcountry)</div>
                                    </div>

                                </div>
                                <div class="col-md-4" id="forgnprjctfundbodynongovtunivamt_1">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Foreign Non Govt. Univ. Amount</label><br>
                                        @Html.TextBoxFor(m => m.forgnprjctfundbodynongovt_univAmount, new { @class = "form-control", @id = "forgnprjctfundbodynongovt_univAmount", @onkeypress = "return isNumberKey(event)" })


                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.forgnprjctfundbodynongovt_univAmount)</div>
                                    </div>
                                </div>
                            </div>
                            @* if Funding type is selected as Foreign and funded by is selected as government and funding body is selected as Others *@
                            <div class="row">
                                <div class="col-md-4" id="forgnprjctfundbodynongovtagncyothrsnam_1">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Foreign Non Government Other Agency name</label><br>
                                        @Html.TextBoxFor(m => m.forgnprjctfundbodynongovt_othersagncyname, new { @class = "form-control", @id = "forgnprjctfundbodynongovt_othersagncyname" })


                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.forgnprjctfundbodynongovt_othersagncyname)</div>
                                    </div>
                                </div>
                                <div class="col-md-4" id="forgnprjctfundbodynongovtothrscntry_1">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Country</label><br>
                                        @Html.DropDownListFor(m => m.forgnprjctfundbodynongovt_otherscountry, new SelectList(ViewBag.country, "CountryID", "CountryName"), "Select Country",
                                           new { @class = "form-control", @id = "forgnprjctfundbodynongovt_otherscountry" })
                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.forgnprjctfundbodynongovt_otherscountry)</div>
                                    </div>

                                </div>
                                <div class="col-md-4" id="forgnprjctfundbodynongovtothrsamt_1">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Foreign Non Govt. Agency Amount</label><br>
                                        @Html.TextBoxFor(m => m.forgnprjctfundbodynongovt_othersAmount, new { @class = "form-control", @id = "forgnprjctfundbodynongovt_othersAmount", @onkeypress = "return isNumberKey(event)" })


                                        <div class="txt-error txt-red">@Html.ValidationMessageFor(m => m.forgnprjctfundbodynongovt_othersAmount)</div>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <div class="col-md-12 col-sm-12 m-b-sm" id="prjcttypeconsul">
                            <div class="row">
                                <div class="col-md-12">
                                    <h3 class="spl-title"> Project type: Consultancy </h3>

                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4" id="prjctdetails2">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Project Funding Type</label>
                                        @Html.DropDownListFor(m => m.ConsProjectFundingType_Qust_1, new SelectList(ViewBag.fundingtype, "codevalAbbr", "CodeValDetail"), "Select any",
                               new { @class = "form-control", @id = "consprjctfundingtype" })
                                        @*<label class="radio chkbox-adj mbnull"> @Html.RadioButtonFor(m => m.ProjectFundingType_Qust_1, "Indian", new { @id = "ProjectconsFundingType_ind", @checked = "checked" })<span></span> &nbsp; Indian </label>
                                            <label class="radio chkbox-adj mbnull"> @Html.RadioButtonFor(m => m.ProjectFundingType_Qust_1, "Foreign", new { @id = "ProjectconsFundingType_frgn" }) <span></span> &nbsp; Foreign </label>*@

                                        <div> @Html.ValidationMessageFor(m => m.ConsProjectFundingType_Qust_1)</div>
                                    </div>
                                </div>
                                <div class="col-md-4 conforgnPrjctDet">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Foreign Currency</label><br>
                                        @Html.DropDownListFor(m => m.ConsSelCurr, new SelectList(ViewBag.Currency, "id", "name"), "Select any",
                               new { @class = "form-control" })
                                        @Html.Hidden("ConsFundTypeForgnAndBoth")
                                        <div> @Html.ValidationMessageFor(m => m.ConsSelCurr)</div>
                                    </div>
                                </div>
                                <div class="col-md-4 conforgnPrjctDet">
                                    <div class="form-group custom-form-group">
                                        <label class="required">Conversion rate</label><br>
                                        @Html.TextBoxFor(m => m.ConsConversionRate, new { @class = "form-control", @onkeypress = "return isNumberKey(event)" })
                                        <div> @Html.ValidationMessageFor(m => m.ConsConversionRate)</div>
                                    </div>
                                </div>
                                @*<div class="col-md-4" id="forgncurrencytype">
                                        <div class="form-group custom-form-group">
                                            <label class="required">Currency Type</label>
                                            @Html.TextBoxFor(m => m.ConsForgnCurrencyType, new { @class = "form-control", @id = "consforgncurrencytyp" })


                                            <div> @Html.ValidationMessageFor(m => m.ConsForgnCurrencyType)</div>
                                        </div>
                                    </div>*@
                                <div class="col-md-4" id="consultprjctsubtype">
                                    <div class="form-group custom-form-group ">
                                        <label> Project Account Type </label>
                                        @*@Html.TextBox("ConsProjectSubTypename", "", new { @class = "form-control", @id = "conspjctsubtyp" })*@
                                        @Html.DropDownListFor(m => m.ConsProjectSubType, new SelectList(ViewBag.projectcategory, "codevalAbbr", "CodeValDetail"), "Select Project Category",
                               new { @class = "form-control" })
                                        @Html.ValidationMessageFor(m => m.ConsProjectSubType)
                                        @*@Html.Hidden("ConsProjectSubType")*@
                                        @*@Html.Hidden("Conssubtypename")*@


                                    </div>
                                </div>



                                <div class="col-md-4">
                                    <div class="form-group custom-form-group ">
                                        <label class="required"> Funding Category </label>
                                        @*@Html.TextBox("ConsFundingcategoryname", "", new { @class = "form-control", @id = "conspjctfndngctgry" })
                                            @Html.Hidden("ConsFundingcategoryname")*@
                                        @Html.DropDownListFor(m => m.ConsFundingCategory, new SelectList(ViewBag.consScheme, "id", "name"), "Select Project scheme",
                               new { @class = "form-control" })
                                        @*@Html.Hidden("ConsFundingCategory")*@
                                        @Html.ValidationMessageFor(m => m.ConsFundingCategory)

                                    </div>
                                </div>

                            </div>


                        </div>
                    </div>
                </div>

                <div class="tab">
                    <div class="col-md-12 col-sm-12 mb30">


                        <div class="row">


                            <div class="col-md-4">
                                <div class="form-group custom-form-group">
                                    <label>Is Year Wise Allocation</label>
                                    @Html.CheckBoxFor(m => m.IsYearWiseAllocation, new { @id = "IsYearWiseAllocation" })

                                </div>
                            </div>
                        </div>
                        <div id="YWHead" class="row dis-none gray-bg p-b-md">
                            <div id='YWtabs' class="custom-tab-ul page-wrapper">

                                <ul class="nav nav-pills">
                                    <li class="active"><a data-toggle="pill" href="#Year1">Year 1</a></li>
                                </ul>

                                <div class="tab-content white-bg">
                                    <div id="divStaticEMI" class="col-md-6 dis-none m-b-sm">
                                        <div>
                                            <label name="lblEMI"></label>
                                            @Html.TextBox("EMIValue", null, new { @class = "form-control", @onkeypress = "return isNumberKey(event)", @onkeyup = "sumEMIYW(this);", @autocomplete = "off" })
                                            @Html.ValidationMessage("EMIValue")
                                        </div>
                                    </div>
                                    <div id="Year1" class="tab-pane fade in active">
                                        <div class="">
                                            @Html.Hidden("YearWiseHead[0].Year", "1")
                                            <div name="divAllocateContent" class="gray-lg-bg-md">
                                                <div class="row">
                                                    <label class="col-md-4">Allocation Head</label>
                                                    <label class="col-md-4"> Allocation Type </label>
                                                    <label class="col-md-3"> Allocation Value </label>
                                                </div>

                                                <div name="primaryAllocateDiv" class="row m-b-sm">
                                                    <div class="col-md-4">

                                                        @Html.DropDownList("YearWiseHead[0].AllocationHeadYW", new SelectList(ViewBag.allocatehead, "id", "name"), "Select Allocation head", new { @class = "form-control" })


                                                    </div>
                                                    <div class="col-md-4">
                                                        <div>
                                                            <label class="fn-normal" name="lblRecurring"></label>

                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        @Html.TextBox("YearWiseHead[0].AllocationValueYW", "", new { @class = "form-control", @onkeypress = "return isNumberKey(event)", @onkeyup = "sumAllocationYW(this);", @autocomplete = "off" })

                                                    </div>

                                                    <div class="col-md-1">
                                                        <button class="dis-none btn-sm btn btn-danger" type="button" name="removeButton"><i class="ion-android-close"></i></button>
                                                    </div>
                                                </div>
                                                <div class="row p-b-sm">
                                                    <div class="col-md-11">
                                                        <h4 class="text-right">
                                                            Total Allocation : <label name="lblTtlYearVal"> </label>
                                                            <button type="button" name="btnAddYWAllocation" class="btn-primary btn pull-left"><i class="ion-android-add"></i>Add</button>
                                                        </h4>
                                                    </div>
                                                </div>
                                            </div>





                                            <div class="gray-bg-md">
                                                <div class="row m-b-sm">

                                                    <div class="col-md-6">
                                                        <label class="fn-normal">No of Installment</label>
                                                        @Html.TextBox("YearWiseHead[0].NoOfInstallment", null, new { @class = "form-control", @onkeyup = "createNoOfEMI(this);", @onkeypress = "return ValidateNumberOnly(event)" })

                                                    </div>
                                                    <div class="col-md-6">
                                                        <label class="fn-normal">Installment Value</label>
                                                        @Html.TextBox("YearWiseHead[0].EMIValueForYear", null, new { @class = "form-control", @onkeypress = "return isNumberKey(event)" })

                                                    </div>


                                                </div>
                                                <div name="divDynEMI" class="row">


                                                </div>
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <h4 class="text-right">Total Installment : <label name="lblEMIYearVal"> </label></h4>
                                                    </div>
                                                </div>
                                            </div>




                                        </div>

                                    </div>


                                </div>
                            </div>

                        </div>
                        <div id="OAHead" class="row">
                            <div id="divAllocateContent" class="gray-lg-bg-md">
                                <div class="row">
                                    <label class="col-md-4">Allocation Head</label>
                                    <label class="col-md-4"> Allocation Type </label>
                                    <label class="col-md-3"> Allocation Value </label>
                                </div>

                                <div id="primaryAllocateDiv" class="row m-b-sm">
                                    <div class="col-md-4">
                                        @Html.DropDownList("Allocationhead", new SelectList(ViewBag.allocatehead, "id", "name"), "Select Allocation head", new { @class = "form-control", @id = "allocatehead" })
                                        <div> @Html.ValidationMessageFor(m => m.Allocationhead)</div>
                                    </div>
                                    <div class="col-md-4">
                                        <div>
                                            <label class="fn-normal" id="lblRecurring"></label>

                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        @Html.TextBox("Allocationvalue", "", new { @class = "form-control", @id = "allocatevalue", @onkeypress = "return isNumberKey(event)", @onkeyup = "sumAllocation();", @autocomplete = "off" })
                                        @Html.Hidden("Allocationtotal", "", new { @class = "form-control", @id = "ttlallocatedvalue" })
                                        @Html.Hidden("AllocationId", "", new { @class = "form-control", @id = "allocatedid" })
                                    </div>

                                    <div class="col-md-1">
                                        <button class="dis-none btn-sm btn btn-danger" type="button" name="removeButton"><i class="ion-android-close"></i></button>
                                    </div>

                                </div>
                                <div class="row p-b-sm">
                                    <div class="col-md-11">
                                        <h4 class="text-right">
                                            Total Allocation : <label id="lblTtlVal"> </label>
                                            <button type="button" id="btnAddAllocationhead" class="btn-primary btn pull-left"><i class="ion-android-add"></i>Add</button>
                                        </h4>
                                    </div>
                                </div>
                            </div>

                            <div id="divStaticOAEMI" class="col-md-6 dis-none">
                                <div>
                                    <label name="lblEMI"></label>
                                    @Html.TextBox("EMIValue", null, new { @class = "form-control", @onkeypress = "return isNumberKey(event)", @onkeyup = "sumEMI(this);", @autocomplete = "off" })
                                    @Html.ValidationMessage("EMIValue")
                                </div>
                            </div>
                            <div class="gray-bg-md">
                                <div class="row m-b-sm">

                                    <div class="col-md-6">
                                        <label class="fn-normal">No of Installment</label>
                                        @Html.TextBoxFor(m => m.NoOfEMI, new { @class = "form-control", @onkeyup = "createOANoOfEMI(this);", @onkeypress = "return ValidateNumberOnly(event)" })

                                    </div>



                                </div>
                                <div id="divOADynEMI" class="row">


                                </div>
                                <div class="row p-b-sm">
                                    <div class="col-md-11">
                                        <h4 class="text-right">Total Installment : <label id="lblEMIVal"> </label></h4>
                                    </div>
                                </div>

                            </div>

                        </div>




                    </div>


                </div>
                <div class="tab">
                    <div class="col-md-12 col-sm-12 mb30">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group custom-form-group">
                                    <label>Total Number of Staffs</label>
                                    @Html.TextBoxFor(m => m.TotalNoofProjectStaffs, new { @class = "form-control", @id = "totlprjctstaffs", @onkeypress = "return ValidateNumberOnly(event)" })

                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group custom-form-group">
                                    <label>Categorywise breakup of Staffs</label>
                                </div>
                            </div>
                            <div id="divStaffContent">
                                <div class="mt10 mb10">
                                    <div class="col-md-4">
                                        <div class="form-group custom-form-group">
                                            <label>Category</label>
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <div class="form-group custom-form-group">
                                            <label> No. of Staffs </label>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group custom-form-group">
                                            <label> Salary (in Rs.) </label>
                                        </div>
                                    </div>

                                </div>

                                <div id="primaryStaffDiv">
                                    <div class="col-md-4">
                                        <div class="form-group custom-form-group" id="staffcategory">
                                            @Html.DropDownList("CategoryofStaffs", new SelectList(ViewBag.staffcategory, "id", "name"), "Select staff category",
                   new { @class = "form-control", @id = "allocatehead" })
                                            <div> @Html.ValidationMessageFor(m => m.CategoryofStaffs)</div>
                                        </div>
                                    </div>

                                    <div class="col-md-2">
                                        <div class="form-group custom-form-group" id="noofstaff">
                                            @Html.TextBox("NoofStaffs", "", new
                                       {
                                           @class = "form-control",
                                           @id = "noofstaffs",
                                           @onkeypress = "return isNumberKey(event)",
                                           @onchange = "calculatestaffSum();",
                                           @autocomplete = "off"  @*, @onkeyup = "sumAllocation();", @autocomplete = "off"*@ })

                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group custom-form-group" id="staffsalary">
                                            @Html.TextBox("SalaryofStaffs", "", new
                                       {
                                           @class = "form-control",
                                           @id = "salaryofstaffs",
                                           @onkeypress = "return isNumberKey(event)",
                                           @onchange = "calculatestaffSum();",
                                           @autocomplete = "off" @*, @onkeyup = "sumAllocation();", @autocomplete = "off"*@ })
                                            @*@Html.Hidden("Allocationtotal", "", new { @class = "form-control", @id = "ttlallocatedvalue" })*@
                                            @Html.Hidden("StaffCategoryID", "", new { @class = "form-control", @id = "allocatedid" })

                                        </div>
                                    </div>

                                    <div class="col-md-1">
                                        <button class="dis-none" type="button" name="removeButton"><i class="ion-android-close"></i></button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <button type="button" id="btnAddStaffCategory" class="btn-sm"><i class="ion-android-add"></i></button>
                            </div>

                            <div class="row ">
                                <div class="col-md-4 text-center">
                                    <div class="form-group custom-form-group">
                                        <label class="mt10"><b>Total Summary</b></label>

                                    </div>
                                </div>
                                <div class="col-md-2">
                                    <div class="form-group custom-form-group">
                                        <input class="form-control" id="sumstaffs" value="" name="SumofStaffs" />
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group custom-form-group">
                                        <input class="form-control" id="sumstaffssalry" value="" name="SumSalaryofStaffs" />
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

                <div class="tab">
                    <div class="col-md-12 col-sm-12 mb30">
                        <div class="row">
                            <div class="col-md-12">


                                <div id="DocdivContent">
                                    <div class="row">
                                        <label class="col-md-3 fn-normal">Attachment type</label>
                                        <label class="col-md-3 fn-normal">Attachment Name </label>
                                        <label class="col-md-3 fn-normal">Attachment </label>
                                    </div>

                                    <div class="m-b-sm row" id="DocprimaryDiv">
                                        <div class="col-md-3">
                                            @Html.DropDownList("DocType", new SelectList(ViewBag.Docmenttype, "id", "name"), "Select Document Type",
                   new { @class = "form-control", @id = "doctype" })
                                            @Html.Hidden("Docid")

                                        </div>
                                        <div class="col-md-3">
                                            <input class="form-control" name="AttachName" id="docname" value="" type="text">

                                        </div>
                                        <div class="col-md-3">
                                            <input type="file" name="file" id="docfile" />&nbsp;&nbsp;&nbsp;
                                            @Html.ValidationMessageFor(m => m.DocPath)

                                        </div>
                                        <div class="col-md-2 doclink mt6">
                                            <a href="#" class="link1" target="_blank"></a>
                                            @Html.Hidden("DocPath", "", new { @class = "HiddenDocPath" })
                                            @Html.Hidden("DocName", "", new { @class = "HiddenDocName" })
                                        </div>

                                        @*<div class="col-md-1">
                                            <button class="dis-none btn-sm btn btn-danger" type="button" name="removeButton"><i class="ion-android-close"></i></button>
                                        </div>*@
                                    </div>
                                    <div class="row p-b-sm">
                                        <div class="col-md-12">
                                            <h4 class="text-right">
                                                <button type="button" id="btnAddDoc" class="btn-primary btn pull-left"><i class="ion-android-add"></i>Add</button>
                                            </h4>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="custom-nav-btn text-right">
                    <button type="button" class="btn btn-default pull-left" id="prevBtn" onclick="nextPrev(-1)">Previous</button>

                    <button type="button" class="btn btn-primary pull-right" id="nextBtn" onclick="nextPrev(1)">Next</button>
                    <button type="button" class="btn btn-default pull-right" onclick="window.location.href='@Url.Action("ProjectOpening", "Project")';">Close</button>
                </div>





            </div>

            @*<div class="row mt30" id="gridlist">

                <div class="col-md-12">
                    <div class="page-wrapper">
                        <div class="custom-jsgrid-normal">
                            <div id="gridProjectList"></div>
                        </div>
                    </div>
                </div>
            </div>*@

            <div class="row mt30" id="gridproposal">
                <div id="AddNewEntryModel" class="modal fade" role="dialog">
                    <div class="modal-dialog wdth80">

                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" onclick="window.location.href='@Url.Action("ProjectOpening", "Project")';">&times;</button>
                                <h3 class="modal-title">Select Proposal</h3>
                            </div>
                            <div class="modal-body">

                                <!-- Modal content-->
                                <div class="col-md-12">
                                    <div class="page-wrapper">
                                        <div class="custom-jsgrid-normal">
                                            <div id="gridProposalList"></div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                @*<input type="submit" name="Button" value="ADD" class="btn btn-primary" id="btnSave" />&nbsp;&nbsp;*@
                                <button type="button" class="btn btn-primary mt10" data-dismiss="modal" onclick="window.location.href='@Url.Action("ProjectOpening", "Project")';">Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            @*<div class="row mt30" id="gridsearchlist">

                    <div class="col-md-12">
                        <div class="page-wrapper">
                            <div class="custom-jsgrid-normal">
                                <div id="gridsearchProposalList"></div>
                            </div>
                        </div>
                    </div>
                </div>*@
        </div>
    @*}*@
</div>
<div id="popup"></div>
@if (ViewBag.succMsg != null)
{
    <div id="myModal" class="modal fade modal-success" role="dialog">
        <div class="modal-dialog modal-sm">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" onclick="window.location.href='@Url.Action("ProjectOpening", "Project")';">&times;</button>
                    <i class="ion-android-checkmark-circle"></i>
                    <h3 class="modal-title">Saved successfully</h3>
                </div>
                <div class="modal-body">

                    <p>@ViewBag.succMsg</p>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal" onclick="window.location.href='@Url.Action("ProjectOpening", "Project")';">Close</button>
                </div>
            </div>

        </div>
    </div>

    <script>
        $(document).ready(function () {
            $('#myModal').modal('show');
        });

    </script>

}

<div id="myModal2" class="modal fade modal-success" role="dialog">
    <div class="modal-dialog modal-sm">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <i class="ion-android-checkmark-circle"></i>
                <h3 class="modal-title">Deleted successfully</h3>
            </div>
            <div class="modal-body">

                <p>The Proposal has been Deleted successfully.</p>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>
<div id="ValidationModal" class="modal fade modal-warning" role="dialog">
    <div class="modal-dialog modal-sm">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <i class="ion-android-warning"></i>
                <h3 class="modal-title">Warning</h3>
            </div>
            <div class="modal-body">

                <p id="MsgValidation"></p>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>

<div id="popupFilter" class="filter-popup">
    <div class="">
        <div class="filter-content">
            <div class="white-bg">
                <div class="form-group custom-form-group">
                    <h3>Filter by</h3>
                </div>
                <div class="form-group custom-form-group">
                    @Html.DropDownListFor(m => m.SearchField.ProjectType, new SelectList(ViewBag.projecttype, "codevalAbbr", "CodeValDetail"), "Project type", new { @id = "srchPrjcttype", @class = "form-control" })
                </div>
                <div class="form-group custom-form-group">
                    @Html.TextBoxFor(m => m.SearchField.ProposalNumber, new { @id = "proposalnumber", @placeholder = "Proposal Number", @class = "form-control" })
                </div>
                @*<div class="form-group custom-form-group">
                        @Html.TextBoxFor(m => m.ProjectNumber, new { @id = "projectnumber", @placeholder = "Project Number", @class = "form-control" })
                    </div>*@
                <div class="form-group custom-form-group">
                    @Html.DropDownListFor(m => m.SearchField.PIName, new SelectList(ViewBag.PI, "id", "name"), "PI Name", new { @id = "srchPIName", @class = "form-control" })
                </div>
                <div class="form-group custom-form-group">
                    <label>Search by</label><br>
                    <label class="radio chkbox-adj">
                        @Html.RadioButtonFor(m => m.SearchField.SearchBy, "SODate", new { @id = "SearchBy_SODate", @checked = "checked" })
                        <span></span>
                        SO Date
                    </label>
                    <label class="radio chkbox-adj">
                        @Html.RadioButtonFor(m => m.SearchField.SearchBy, "CreatedDate", new { @id = "SearchBy_CreatedDate" })
                        <span></span>
                        Created Date
                    </label>
                </div>

                <div id="DivSODate" class="form-group custom-form-group">
                    <label class="full-width">Sanction Order Date</label>
                    @Html.TextBoxFor(m => m.SearchField.FromSODate, new { @id = "FromSODate", @class = "form-control half-form" })
                    @Html.TextBoxFor(m => m.SearchField.ToSODate, new { @id = "ToSODate", @class = "form-control half-form" })
                </div>

                <div id="DivCrtdDate" class="form-group custom-form-group">
                    <label class="full-width">Created Date</label>
                    @Html.TextBoxFor(m => m.SearchField.FromDate, new { @id = "FromDate", @class = "form-control half-form" })
                    @Html.TextBoxFor(m => m.SearchField.ToDate, new { @id = "ToDate", @class = "form-control half-form" })
                </div>
                <div class="form-group custom-form-group mt30 text-center">
                    <a id="btnReset" href="javascript:void(0)">Reset</a>
                </div>
                <div class="form-group custom-form-group text-center">
                    <button id="btnSearch" type="button" class="btn btn-primary mr10">Search</button>
                    <button name="btnClose" type="button" class="btn btn-default">Close</button>
                </div>





            </div>
        </div>

    </div>

    <a href="javascript:void(0)" name="btnClose" class="close-btn"><i class="ion-android-cancel"></i></a>

</div>


<script>
    var errMsg = '@ViewBag.errMsg';
    var piList = '@Html.Raw(Json.Encode(ViewBag.PI))';
    var allocationHeads = '@Html.Raw(Json.Encode(ViewBag.allocatehead))'
    var modelData = '@Html.Raw(Json.Encode(Model))'
    
    
    
    $(document).ready(function () {
        //get the relevant form
        //  var form = $('#frmSRB');
       
        
        $('.selectpicker').selectpicker({
            liveSearch: true
        });
        $('.selectpicker').selectpicker('refresh');
        if (errMsg) {
            $('#FailedAlert').html(errMsg);
            $('#Failed').modal('toggle');
            //var jsonData = JSON.parse(modelData);
            $('#addnewpage').hide();
            $('#projectopening').show();
            $('#gridlist').hide();
            $('#viewdoc').hide();
            //fillData(jsonData);

        } else {
            $('#projectopening').hide();
            $('#viewdoc').hide();
        }
        
        $('#addnewpage').hide();
        $('#projectopening').show();
        $('#gridlist').hide();
        $('.form-control').attr('disabled', true);
       // $("#IsSubProject").attr('disabled', true);
        $("input[type='radio']").attr('disabled', true);
        $("#btnAddCoPI").hide();
        $("#btnAddotherinstCoPI").hide();
        $("input[type='file']").attr('disabled', true);
        $("input[type='checkbox']").attr('disabled', true);
        $("#btnAddAllocationhead").hide();
        $("#btnAddStaffCategory").hide();
        $("#btnAddDoc").hide();
       var jsonData = JSON.parse(modelData);
       fillData(jsonData);
       $("#MainProjectId").val('@Model.MainProjectId');
       $("input[name='removeButton']").hide();
        //if (subproj != null) {

        //    $('#divMainProject').removeClass('dis-none');
        //    $('#MainProjectId').val(subproj);
        //    $('#IsSubProject').prop('checked', true);
        //} else {
        //    $('#divMainProject').addClass('dis-none');
        //    $('#IsSubProject').prop('checked', false);
        //}
    });
  
    $('#btnViewEnhancements').on('click', function () {
        var projectid = $('input[name="ProjectID"]').val();
        $.ajax({
            type: "GET",
            url: '@Url.Action("_ExtensionandEnhancementHistory", "Project")',
            data: {
                Projectid: projectid
            },
            contentType: "application/x-www-form-urlencoded",
            success: function (data) {
                $("#popup").html(data);
                $('#ViewDetailsModal').modal('toggle');
            }
        });

    });
    //$("#ProposalApprovedDate").datepicker({ minDate: -1, maxDate: -2 }).attr('readonly', 'readonly');
    $(document).ready(function () {
        var SearchBy = $('input[name^="SearchField.SearchBy"]:checked').val();
        if (SearchBy == 'SODate') {
            $('#DivSODate').show();
            $('#DivCrtdDate').hide();
        }
        else {
            $('#DivCrtdDate').show();
            $('#DivSODate').hide();
        }
        $("#FromSODate, #ToSODate, #FromDate, #ToDate").datepicker
           ({
               dateFormat: 'dd-MM-yy',
               showStatus: true,
               showWeeks: true,
               changeYear: true,
               yearRange: '-100:+0',
               highlightWeek: true,
               numberOfMonths: 1,
               showAnim: "scale",
               showOptions: {
                   origin: ["top", "left"]
               }
           });

    });
    $('#IsYearWiseAllocation').click(function () {
        if ($(this).is(":checked")) {
            $('div#YWtabs ul li').not(':first').remove();
            $('#YWtabs .tab-content .tab-pane').not(':first').remove();
            $('#YWHead').removeClass('dis-none');
            $('#OAHead').addClass('dis-none');
            createYWHeadTab();
        } else {
            $('#YWHead').addClass('dis-none');
            $('#OAHead').removeClass('dis-none');
        }
    });
    //$('#IsSubProject').click(function () {
    //    if ($(this).is(":checked")) {

    //        $('#divMainProject').removeClass('dis-none');
    //    } else {
    //        $('#divMainProject').addClass('dis-none');
    //    }
    //});
    function createYWHeadTab() {
        var ttlYear = 0, ttlMoth = 0, ohPercentYW = 0, ohPercentLP = 0, ohYWValue = 0, ohLPValue = 0, monthWiseEMI = 0, yearlyEMI = 0, lastPeriodEMI = 0;
        //var pYear = parseInt($('input[name="Projectdurationyears"]').val());
        //var pMonth = parseInt($('input[name="Projectdurationmonths"]').val());
        var strDate = $("#TentativeStartdate").val();
        var clsDate = $("#TentativeClosedate").val();
        var startDate = moment(parseDate(strDate));
        var closeDate = moment(parseDate(clsDate));
        var pYear = closeDate.diff(startDate, 'year');
        startDate.add(pYear, 'years');
        var pMonth = closeDate.diff(startDate, 'months');
        startDate.add(pMonth, 'months');

        var days = closeDate.diff(startDate, 'days');
        //if (pYear > 1) {
        //    result = years + ' years ';
        //} else if (pYear == 1) {
        //    result = years + ' year ';
        //}
        //if (pMonth > 1) {
        //    result = result + pMonth + ' months ';
        //} else if (pMonth == 1) {
        //    result = result + pMonth + ' month ';
        //}
        //if (days > 1) {
        //    result = result + days + ' days';
        //} else if (days == 1) {
        //    result = result + days + ' day';
        //}
        if (days >= 1)
           pMonth = pMonth + 1;
        var projType = $('#Prjcttype').val();
        var _ohPercent = parseFloat($('#OverheadPercentage').val());
        var budgetVal = parseFloat($('#basevalue').val());
        if (!isNaN(pYear) && !isNaN(isNaN(pYear))) {
            var monthWisePercent = 0;
            if (projType == 2 && !isNaN(_ohPercent) && _ohPercent != 0) {
                ttlMoth = pYear * 12 + pMonth
                monthWisePercent = _ohPercent / ttlMoth;
                monthWiseEMI = budgetVal / ttlMoth;
                yearlyEMI = Math.round(monthWiseEMI * 12);
                lastPeriodEMI = Math.round(monthWiseEMI * pMonth);
                ohPercentYW = monthWisePercent * 12;
                ohPercentLP = monthWisePercent * pMonth;
                ohYWValue = Math.round(budgetVal * ohPercentYW / 100);
                if (ohPercentLP > 0)
                    ohLPValue = Math.round(budgetVal * ohPercentLP / 100);
                if (pYear > 0) {
                    $("input[name='YearWiseHead[0].AllocationValueYW']:first").val(ohYWValue);
                    $("input[name='YearWiseHead[0].EMIValueForYear']:first").val(yearlyEMI);
                } else {
                    $("input[name='YearWiseHead[0].AllocationValueYW']:first").val(ohLPValue);
                    $("input[name='YearWiseHead[0].EMIValueForYear']:first").val(lastPeriodEMI);
                }
                $("label[name ='lblRecurring']:first").html('Recurring');
                $("select[name='YearWiseHead[0].AllocationHeadYW']:first").val(6);

            }
            if (pMonth > 0)
                ttlYear = pYear + 1;
            else
                ttlYear = pYear;
            for (var i = 2; i <= ttlYear; i++) {
                var tabCount = i - 1;
                if (!$("#Year1").hasClass("active"))
                    $("#Year1").addClass("active in");
                // add new tab and related content
                $("div#YWtabs ul").append(
                   "<li><a data-toggle='pill' href='#Year" + i + "'>Year " + i + "</a></li> "
               );
                var innerCnt = $('#Year1 > Div').clone().find("input[name='YearWiseHead[0].Year']").val(i).end();
                $(innerCnt).find("input:not(input[name='YearWiseHead[0].Year']), select").val("");
                $(innerCnt).find('label[name ="lblRecurring"]').html('');
                $(innerCnt).find('label[name ="lblTtlYearVal"]').html('');
                $(innerCnt).find('label[name ="lblEMIYearVal"]').html('');
                $(innerCnt).find('div[name="divDynEMI"]').html('');
                if (ttlYear == i && ohLPValue > 0) {
                    $(innerCnt).find("input[name='YearWiseHead[0].AllocationValueYW']:first").val(ohLPValue);
                    $(innerCnt).find("label[name ='lblRecurring']:first").html('Recurring');
                    $(innerCnt).find("select[name='YearWiseHead[0].AllocationHeadYW']:first").val(6);
                    $(innerCnt).find("input[name='YearWiseHead[0].EMIValueForYear']:first").val(lastPeriodEMI);
                } else if (ohYWValue > 0) {
                    $(innerCnt).find("input[name='YearWiseHead[0].AllocationValueYW']:first").val(Math.round(ohYWValue));
                    $(innerCnt).find("label[name ='lblRecurring']:first").html('Recurring');
                    $(innerCnt).find("select[name='YearWiseHead[0].AllocationHeadYW']:first").val(6);
                    $(innerCnt).find("input[name='YearWiseHead[0].EMIValueForYear']:first").val(yearlyEMI);
                }
                $(innerCnt).find("input, select").each(function () {
                    $(this).attr("name", $(this).attr("name").replace(/\d+/, tabCount));
                    $(this).attr("id", $(this).attr("id").replace(/\d+/, tabCount));
                });
                var cntDiv = $('<div/>', {
                    id: 'Year' + i,
                    'class': 'tab-pane fade'
                }).append(innerCnt).appendTo('#YWtabs .tab-content');
            }
            /*Overall*/
            $("div#YWtabs ul").append(
                   "<li><a id='linkOverall' data-toggle='pill' href='#divOverall'>Overall </a></li> "
               );
            var cntDiv = $('<div/>', {
                id: 'divOverall',
                'class': 'tab-pane fade'
            }).appendTo('#YWtabs .tab-content');
            calcTtlValueYW()
        }
    }
    $("#TentativeStartdate, #TentativeClosedate").change(function () {
        $('div#YWtabs ul li').not(':first').remove();
        $('#YWtabs .tab-content .tab-pane').not(':first').remove();
        createYWHeadTab();
    });
    function calcTtlValueYW() {
        $('#YWtabs .tab-content .tab-pane').not(':last').each(function () {
            var ttlYWVal = 0;
            var ttlEMIVal = 0;
            $(this).find('input[name $=".AllocationValueYW"]').each(function () {
                var parseVal = parseFloat($(this).val());
                if (!isNaN(parseVal))
                    ttlYWVal = ttlYWVal + parseVal;
            });
            $(this).find('input[name $=".EMIValue"]').each(function () {
                var parseEMIVal = parseFloat($(this).val());
                if (!isNaN(parseEMIVal))
                    ttlEMIVal = ttlEMIVal + parseEMIVal;
            });
            $(this).find('label[name ="lblTtlYearVal"]').html(ttlYWVal);
            $(this).find('label[name ="lblEMIYearVal"]').html(ttlEMIVal);
        });
    }
    function sumAllocationYW(evt) {
        var ttlYWVal = 0;
        var tabEle = $(evt).closest('.tab-pane');
        tabEle.find('input[name $=".AllocationValueYW"]').each(function () {
            var parseVal = parseFloat($(this).val());
            if (!isNaN(parseVal))
                ttlYWVal = ttlYWVal + parseVal;
        });
        tabEle.find('label[name ="lblTtlYearVal"]').html(ttlYWVal);
    }
    function sumEMIYW(evt) {
        var ttlYWVal = 0;
        var tabEle = $(evt).closest('.tab-pane');
        tabEle.find('input[name $=".EMIValue"]').each(function () {
            var parseVal = parseFloat($(this).val());
            if (!isNaN(parseVal))
                ttlYWVal = ttlYWVal + parseVal;
        });
        tabEle.find('label[name ="lblEMIYearVal"]').html(ttlYWVal);
    }
    function sumEMI(evt) {
        var ttlEMIVal = 0;
        $('input[name ="ArrayEMIValue"]').each(function () {
            var parseVal = parseFloat($(this).val());
            if (!isNaN(parseVal))
                ttlEMIVal = ttlEMIVal + parseVal;
        });
        $('#lblEMIVal').html(ttlEMIVal);
    }
    function createNoOfEMI(evt) {
        var noOfEMI = parseInt($(evt).val());
        var eleName = $(evt).attr("name");
        var newEleName = eleName.substr(0, (eleName.lastIndexOf('.') + 1));
        var tabEle = $(evt).closest('.tab-pane');
        tabEle.find('label[name ="lblEMIYearVal"]').html('0');
        tabEle.find('div[name="divDynEMI"]').html('');
        if (!isNaN(noOfEMI)) {
            for (var i = 1; i <= noOfEMI; i++) {
                var staticDiv = $('#divStaticEMI:first').clone();
                staticDiv.find('input[name="EMIValue"]').attr("name", newEleName + "EMIValue");
                staticDiv.removeClass('dis-none');
                staticDiv.find('label[name="lblEMI"]').html('Installment ' + i);
                tabEle.find('div[name="divDynEMI"]').append(staticDiv);
            }
        }
    }
    function createOANoOfEMI(evt) {
        var noOfEMI = parseInt($(evt).val());
        $('#lblEMIVal').html('0');
        $('#divOADynEMI').html('');
        if (!isNaN(noOfEMI)) {
            for (var i = 1; i <= noOfEMI; i++) {
                var staticDiv = $('#divStaticOAEMI').clone();
                staticDiv.find('input[name="EMIValue"]').attr("name", "ArrayEMIValue");
                staticDiv.removeClass('dis-none');
                staticDiv.find('label[name="lblEMI"]').html('Installment ' + i);
                $('#divOADynEMI').append(staticDiv);
            }
        }
    }
    function sumAllocation() {
        var ttlAllowVal = 0;
        $('input[name ="Allocationvalue"]').each(function () {
            var parseVal = parseFloat($(this).val());
            if (!isNaN(parseVal))
                ttlAllowVal = ttlAllowVal + parseVal;
        });
        $('#lblTtlVal').html(ttlAllowVal);
    }
    $(document).on('click', 'a[id="linkOverall"]', function () {
        var ttlYWVal = 0;
        var ttlEMIVal = 0;
        $('#divOverall').html('');
        $('#YWtabs .tab-content .tab-pane').not(':last').each(function (i, item) {

            $(this).find('input[name $=".AllocationValueYW"]').each(function () {
                var parseVal = parseFloat($(this).val());
                if (!isNaN(parseVal))
                    ttlYWVal = ttlYWVal + parseVal;
            });
            $(this).find('input[name $=".EMIValue"]').each(function () {
                var parseEMIVal = parseFloat($(this).val());
                if (!isNaN(parseEMIVal))
                    ttlEMIVal = ttlEMIVal + parseEMIVal;
            });

            var tabDiv = $(item).children('Div').first().clone(true);
            var currentyear = i + 1;
            tabDiv.find('button').remove();
            tabDiv.find('select').each(function (j, ele) {
                $(this).val(document.getElementsByName($(this).attr("name"))[j].value).attr("selected", "selected")
            });
            tabDiv.find('input,select').attr("disabled", true);
            tabDiv.find('input,select').attr("name", "overallreadonlyinput");
            var newDiv = $('<div class="mb30"/>');
            newDiv.append($('<h3 class="panel-tt">').text('Year ' + currentyear));
            newDiv.append(tabDiv).appendTo('#divOverall');
        });
        var newPMlblDiv = $('<div class="gray-bg-md"/>');
        var newlblDiv = $('<div class="row "/>');
        newlblDiv.append($('<div class="col-md-3"/>').text('Net Allocation'));
        newlblDiv.append($('<div class="col-md-3"/>').text(ttlYWVal));
        newlblDiv.append($('<div class="col-md-3"/>').text('Net Installment'));
        newlblDiv.append($('<div class="col-md-3"/>').text(ttlEMIVal));
        newPMlblDiv.append(newlblDiv).appendTo('#divOverall');
        //$('#divOverall').append(newlblDiv);
    });
    $(document).on('change', 'select[name$=".AllocationHeadYW"]', function () {
        var headVal = $(this).val();
        var typeOfAllocation = '';
        if (headVal != "") {
            $.each(JSON.parse(allocationHeads), function (i, item) {
                if (item.id == headVal) {
                    typeOfAllocation = item.code;
                    return false;
                }

            });
        }
        $(this).closest('div[name="primaryAllocateDiv"]').find('label[name ="lblRecurring"]').html(typeOfAllocation);
    });
    $(document).on('click', 'button[name="btnAddYWAllocation"]', function () {
        var cln = $(this).closest('div[name="divAllocateContent"]').find('div[name="primaryAllocateDiv"]:first').clone().find("input, select").val("").end();
        $(cln).find('label[name ="lblRecurring"]').html('');
        $(cln).find('.dis-none').removeClass('dis-none');
        $(cln).insertBefore($(this).closest('div[name="divAllocateContent"]').find('.p-b-sm'));

    });
    $(document).on('click', 'div[name="primaryAllocateDiv"] button[name="removeButton"]', function () {
        $(this).closest('div[name="primaryAllocateDiv"]').remove();
        calcTtlValueYW();
    });
    $(document).on('change', 'select[name="Allocationhead"]', function () {
        var headVal = $(this).val();
        var typeOfAllocation = '';
        if (headVal != "") {
            $.each(JSON.parse(allocationHeads), function (i, item) {
                if (item.id == headVal) {
                    typeOfAllocation = item.code;
                    return false;
                }

            });
        }
        $(this).closest('#primaryAllocateDiv').find('#lblRecurring').html(typeOfAllocation);
    });
    $('#btnAddAllocationhead').click(function () {
        var cln = $("#primaryAllocateDiv").clone().find("input").val("").end();
        $(cln).find('label[id ="lblRecurring"]').html('');
        $(cln).find('.dis-none').removeClass('dis-none');
        $(cln).insertBefore($(this).closest('#divAllocateContent').find('.p-b-sm'));
    });
    $(document).on('click', '#primaryAllocateDiv button[name="removeButton"]', function () {
        $(this).closest('#primaryAllocateDiv').remove();
        sumAllocation();
    });
    $('input[id^="SearchBy_"]').change(function () {
        var value = $(this).val();
        if (value == 'SODate') {
            $('#DivSODate').show();
            $('#DivCrtdDate').hide();
        }
        else {
            $('#DivCrtdDate').show();
            $('#DivSODate').hide();
        }
        $('#FromSODate').val('');
        $('#ToSODate').val('');
        $('#FromDate').val('');
        $('#ToDate').val('');
    });

    $('a[name="btnClose"],button[name="btnClose"]').click(function () {
        $('#popupFilter').css("display", "none");
    });
    $("#btnFilter").click(function () {
        $('#popupFilter').css("display", "Block");
    });


    $('#Prjcttype').prop("selectedIndex", 0);
    $('#datepickerid').val("");
    $('#txtprpslsrc').val("");
    $('#txtprjcttitle').val("");
    $('#Agncy').prop("selectedIndex", 0);
    $('#txtprpslval').val("");
    $('#txtprjctduratn').val("");
    $('#txtpersonapplied').val("");
    $('#schemename').prop("selectedIndex", 0);
    $('#txtremarks').val("");
    $('#tentstartdatepickerid').val("");
    //$('#startdatepickerid').val("");
    $('#tentclosedatepickerid').val("");
    //$('#closedatepickerid').val("");
    $('#ProposalApprovedDate').val("");
    $('#SOdatepickerid').val("");
    //$('#inputdatepickerid').val("");

    $('#SanctionOrderDate,#ProposalApprovedDate').datepicker({ maxDate: 0, dateFormat: 'dd-MM-yy', changeYear: true, yearRange: '-30:+0' });
    //$('#ProposalApprovedDate').datepicker({ maxDate: 0, dateFormat: 'dd-MM-yy', changeYear: true, yearRange: '-30:+0' });

    $('#TentativeStartdate').datepicker({ dateFormat: 'dd-MM-yy', changeYear: true, yearRange: '-30:+30' });
    //$('#Startdate').datepicker({ dateFormat: 'dd-MM-yy', changeYear: true, yearRange: '-30:+30' });
    $('#TentativeClosedate').datepicker({ dateFormat: 'dd-MM-yy', changeYear: true, yearRange: '-30:+30' });
    //$('#Closedate').datepicker({ dateFormat: 'dd-MM-yy', changeYear: true, yearRange: '-30:+30' });
    //$('#Inputdate').datepicker({ maxDate: 0, minDate: 0, dateFormat: 'dd-MM-yy', changeYear: true, yearRange: '-30:+0' });

    $('#department').prop("selectedIndex", 0);
    $('#PI').prop("selectedIndex", 0);
    $('#txtPIemail').val("");

    $('#copidepartment').prop("selectedIndex", 0);
    $('#CoPI').prop("selectedIndex", 0);
    $('#txtcopiemail').val("");

    $('#doctype').prop("selectedIndex", 0);
    $('#docname').val("");


    $('#btnAddCoPI').click(function () {
        var cln = $("#primaryDiv").clone().find("input").val("").end();
        var cloneElement = $("#primaryDiv").find('#CoPI').parent().clone();
        cln.find('#CoPI').parent().replaceWith(selectPickerApiElement($(cloneElement), "empty", [], ''));
        $(cln).find('.dis-none').removeClass('dis-none');
        $(cln).insertBefore($(this).closest('#divContent').find('.p-b-sm'));
    });





    //function sumAllocation() {
    //    var allocatedvalue = [];

    //    $('input[name="Allocationvalue"]').each(function (idx, val) { allocatedvalue.push($(val).val()); });

    //    var result = 0;

    //    $.each(allocatedvalue, function (i, val) {

    //        if (i == 0) {

    //            //add only if the value is number
    //            var txtallocValue = document.getElementsByName('Allocationvalue')[0].value;

    //            result += parseFloat(txtallocValue);

    //            if (!isNaN(result)) {
    //                $('input[name="Allocationtotal"]').val(result.toFixed(0));
    //                // document.getElementsByName('TotalEnhancedAllocationvalue')[0].value = result;
    //            }


    //        } else {

    //            var txtallocValue = document.getElementsByName('Allocationvalue')[i].value;

    //            result += parseFloat(txtallocValue);

    //            if (!isNaN(result)) {
    //                $("#ttlallocatedvalue").val(result.toFixed(0));
    //                // document.getElementsByName('TotalEnhancedAllocationvalue')[0].value = result;
    //            }
    //        }
    //    });
    //}
    $('#btnAddStaffCategory').click(function () {
        var cln = $("#primaryStaffDiv").clone().find("input").val("").end();
        $(cln).find('.dis-none').removeClass('dis-none');
        $('#divStaffContent').append(cln)

    });

    $(document).on('click', '#divStaffContent button[name="removeButton"]', function () {
        $(this).parent().parent("Div").remove();
    });

    $('#btnSearch').on('click', function () {
        // var token = $("input[name=__RequestVerificationToken]").val();
        getData();

    });
    function ResetForm() {
        $('#srchPrjcttype').val('');
        $('#proposalnumber').val('');
        $('#projectnumber').val('');
        $('#srchPIName').val('');
        $('#FromSODate').val('');
        $('#ToSODate').val('');
        $('#FromDate').val('');
        $('#ToDate').val('');
    }
    $('#btnReset').click(function () {
        ResetForm();
        getData();
    });
    var searchProjectURL = 'SearchProjectList';
    function getData() {
        var Projecttype = $('#srchPrjcttype').val();
        var Proposalnumber = $('#proposalnumber').val();
        var Projectnumber = $('#projectnumber').val();
        var PIName = $('#srchPIName').val();
        //  var SearchBy = $('input[name^="SearchField.SearchBy"]:checked').val();
        var FromSODate = $('#FromSODate').val();
        var ToSODate = $('#ToSODate').val();
        var FromDate = $('#FromDate').val();
        var ToDate = $('#ToDate').val();

        if (Projecttype == "") {
            Projecttype = 0;
        }
        if (FromSODate == "") {
            FromSODate = null;
        }
        if (ToSODate == "") {
            ToSODate = null;
        }
        //  var searchdata = { "__RequestVerificationToken": token, "ProjectType": Projecttype,"ProposalNumber": Proposalnumber, "PIname": PIName, "Searchby": SearchBy, "FromSOdate": FromSODate, "ToSOdate": ToSODate, "Fromdate": FromDate, "Todate": ToDate };
        var searchdata = {
            ProjectType: Projecttype,
            ProposalNumber: Proposalnumber,
            PIName:PIName,
            FromSODate: FromSODate,
            ToSODate: ToSODate
        };
        //var input
        //{
        //    ProjectType: $('#srchPrjcttype').val()
        //    ProposalNumber: $('#proposalnumber').val();
        //    FromSODate: $('#FromSODate').val()
        //    ToSODate: $('#ToSODate').val()

        //}
        $.ajax({
            type: "GET",
            url: searchProjectURL,
            data: searchdata,
            //data: { "ProjectType": Projecttype, "ProposalNumber": Proposalnumber, "FromSOdate": FromSODate, "ToSOdate": ToSODate, },
            //contentType: "application/x-www-form-urlencoded",
            dataType: "json",
            success: function (result) {
                // dataProposal = result;
                $("#gridProjectList").jsGrid({ data: result });
                $('#projectopening').hide();
                $('#gridlist').show();
                $('#popupFilter').hide();

            },
            error: function (err) {
                console.log("error : " + err);
            }
        });

    }

    $('#applicabletax,#basevalue').blur(function () {
        calculateProjectTotal();
    });
    function calculateProjectTotal() {
       var baseVal = parseFloat($('#basevalue').val()) || 0;
        var taxVal = parseFloat($('#applicabletax').val()) || 0;
        var ttlVal = baseVal;
        if (taxVal != 0)
            ttlVal = baseVal + (baseVal * taxVal / 100);
        $('#lblOverallTtl').text(ttlVal.toFixed(2));
    }
    $('#btnaddnew').on('click', function () {
        //$('#propslnum').val();
        //$('#prpslid').hide();
        //$('#docid').hide();
        //$('#copiid').hide();
        $('#addnewpage').hide();
        $('#projectopening').show();
        $('#gridlist').hide();
        //  $('#gridsearchlist').hide();
        //$('#saveproject').show();
        //$('#updateproject').hide();
        $('#viewdoc').hide();
        // $('#createuserid').show();
        // $('#editproposal').hide();
    });
    $("#Agncy").change(function () {
        var agency = $(this).val();
        var Getagencycode = 'LoadAgencycodebyagency';
        $.ajax({
            type: "POST",
            url: Getagencycode,
            data: { agencyid: agency },
            //contentType: "application/json; charset=utf-8",
            //dataType: "json",

            success: function (result) {
                $('#txtagencycode').val(result.AgencyCode);
                $('input[name="AgencyCode"]').val(result.AgencyCode);
                $('input[name="AgencyCodeid"]').val(result.AgencyId);
                $('#tanumbr').val(result.TAN);
                $('#HiddenTAN').val(result.TAN);
                $('#gstnumbr').val(result.GSTIN);
                $('#HiddenGST').val(result.GSTIN);
                $('#panumbr').val(result.PAN);
                $('#HiddenPAN').val(result.PAN);
                $('#txtcntctpersonaddress').val(result.Address);
                $('#HiddenContactAddr').val(result.Address);
                $('#txtcntctpersonmobile').val(result.ContactNumber);
                $('#HiddenContactMobile').val(result.ContactNumber);
                $('#txtcntctpersonemail').val(result.ContactEmail);
                $('#HiddenContactEmail').val(result.ContactEmail);
                $('#txtagncyconperson').val(result.ContactPerson);
                $('#HiddenContactPerson').val(result.ContactPerson);
                $('#txtagncyregaddrss').val(result.AgencyRegisterAddress);
                $('#HiddenRegAddr').val(result.AgencyRegisterAddress);
                $('#txtagncyregname').val(result.AgencyRegisterName);
                $('#HiddenRegName').val(result.AgencyRegisterName);
            },
            error: function (err) {
                console.log("error1 : " + err);
            }
        });

    });

    $('#btnsaveclose').on('click', function () {

        $('#addnewpage').show();
        $('#projectopening').hide();
        $('#gridlist').show();
        //   $('#gridsearchlist').hide();
        //$('#createuserid').hide();

    });

    function formSave() {
        //d.preventDefault();
        var validator = $("#formPO").validate();
        //for (var i = 0; i < validator.errorList.length; i++) {
        //    console.log(validator.errorList[i]);
        //}
        var isValid = $('#formPO').valid();
        if (!isValid)
            return false;
        // var isValid = $(this).closest("form").valid();
        var pidept = $("#department").val(); //Year, Month, Date
        var piname = $("#PI").val();
        var totalstaffs = $("#totlprjctstaffs").val();
        var sumofstaffs = $("#sumstaffs").val();
        var allocationtotal = $("#ttlallocatedvalue").val();
        var sanctionedvalue = $("#basevalue").val();

        if (allocationtotal != null && allocationtotal != 0 && allocationtotal != "") {
            if (sanctionedvalue != allocationtotal) {
                $('#MsgValidation').html("The allocated value is not equal to sanctioned value.");
                $('#ValidationModal').modal('toggle');
                return false;
            }
        }

        if ((pidept > 0) && (piname == null || piname == 0)) {
            $('#MsgValidation').html("Please select Principal Investigator name.");
            $('#ValidationModal').modal('toggle');
            return false;
        }

        if ((pidept == null || pidept == 0) && (piname > 0)) {
            $('#MsgValidation').html("Please select Department of selected Principal Investigator.");
            $('#ValidationModal').modal('toggle');
            return false;
        }
        if ((pidept == 0 || pidept == null) && (piname == null || piname == 0)) {
            $('#MsgValidation').html("Please select Department and Principal Investigator name.");
            $('#ValidationModal').modal('toggle');
            return false;
        }

        // to validate if copi department or copiname is left unselected when either one of them is selected
        var copideptvalues = [];
        var copinamvalues = [];

        $('select[name="CoPIDepartment"]').each(function (idx, val) { copideptvalues.push($(val).val()); });
        $('select[name="CoPIname"]').each(function (idx, val) { copinamvalues.push($(val).val()); });
        //// Sort it
        copideptvalues.sort();
        copinamvalues.sort();

        for (var k = 0; k < copideptvalues.length; ++k) {
            if ((copideptvalues[k] > 0) && (copinamvalues[k] == null || copinamvalues[k] == 0)) {
                $('#MsgValidation').html("Please fill Co PI name.");
                $('#ValidationModal').modal('toggle');
                return false;
            }
            if ((copideptvalues[k] == null || copideptvalues[k] == 0) && (copinamvalues[k] > 0)) {
                $('#MsgValidation').html("Please fill Department of selected Co PI.");
                $('#ValidationModal').modal('toggle');
                return false;
            }
        }
        // duplicate check
        for (var k = 1; k < copinamvalues.length; ++k) {
            if (copinamvalues[k] == copinamvalues[k - 1]) {
                $('#MsgValidation').html("Co PI already selected. Please select a different Co PI.");
                $('#ValidationModal').modal('toggle');
                return false;
            }
        }

        // to validate if attachment type or attachment name is not left blank when either one of them is filled
        var doctypevalues = [];
        var docnamevalues = [];
        $('select[name="DocType"]').each(function (idx, val) { doctypevalues.push($(val).val()); });
        $('input[name="AttachName"]').each(function (idx, val) { docnamevalues.push($(val).val()); });
        //// Sort it
        doctypevalues.sort();
        docnamevalues.sort();

        for (var k = 0; k < doctypevalues.length; ++k) {
            //if ((doctypevalues[k] > 0) && ((docnamevalues[k] == null) || docnamevalues[k] == "")) {
            //    $('#MsgValidation').html("Please fill Attachment name.");
            //    $('#ValidationModal').modal('toggle');
            //    return false;
            //}
            if ((docnamevalues[k] != null && docnamevalues[k] != "") && (doctypevalues[k] == null || doctypevalues[k] == 0)) {
                $('#MsgValidation').html("Please select Attachment type.");
                $('#ValidationModal').modal('toggle');
                return false;
            }
        }
        // duplicate check
        for (var k = 1; k < doctypevalues.length; ++k) {
            if (doctypevalues[k] == doctypevalues[k - 1]) {
                $('#MsgValidation').html("Selected attachment type already exist. Please select a different attachment type.");
                $('#ValidationModal').modal('toggle');
                return false;
            }
            isValid = true;
        }

        // duplicate check allocation head

        var allocateheads = [];
        $('select[name="Allocationhead"]').each(function (idx, val) { allocateheads.push($(val).val()); });
        allocateheads.sort();
        for (var k = 1; k < allocateheads.length; ++k) {
            if (allocateheads[k] == 1) {
                if (allocateheads[k] == allocateheads[k - 1]) {
                    $('#MsgValidation').html("Allocation head already exist. Please select a different allocation.");
                    $('#ValidationModal').modal('toggle');
                    return false;
                }
            }
            isValid = true;
        }

        if (totalstaffs != sumofstaffs) {
            $('#MsgValidation').html("The project staffs total is not equal to the categorywise total.");
            $('#ValidationModal').modal('toggle');
            return false;
        }
        //if (allocationtotal != sanctionedvalue) {
        //    alert('The sanctioned value is not equal to the allocated value');
        //    return false;
        //}
        var projecttype = $('input[name="Prjcttype"]').val();
        var projectsubtype = $('input[name="ProjectSubType"]').val();
        var taxtype = $("#constaxtype").val();
        var taxdocname = $("#proofdocfile").val();
        var existsDocPath = $('#Docpathfornotax').val();
        var consfundingtype = $("#consprjctfundingtype").val();
        var fundingtype = $("#prjctfundingtype").val();

        if (projecttype == 2 && taxtype == 2) {
            if (taxdocname == "" && existsDocPath == '') {
                isValid = false;
                $('#MsgValidation').html("Please attach document proof for no tax");
                $('#ValidationModal').modal('toggle');
                return false;
            }
        }
        if (projecttype == 2 && taxtype == 3) {
            if (taxdocname == "" && existsDocPath == '') {
                isValid = false;
                $('#MsgValidation').html("Please attach document proof for tax exemption");
                $('#ValidationModal').modal('toggle');
                return false;
            }
        }
        if (projecttype == 2 && taxtype == 4) {
            if (taxdocname == "" && existsDocPath == '') {
                isValid = false;
                $('#MsgValidation').html("Please attach document proof for zero rated");
                $('#ValidationModal').modal('toggle');
                return false;
            }
        }
        if ((projecttype == 2) && (consfundingtype == 0 || consfundingtype == null)) {

            isValid = false;
            $('#MsgValidation').html("Please select Project Funding Type");
            $('#ValidationModal').modal('toggle');
            return false;
        }
        if ((projecttype == 1) && (projectsubtype == 2) && (fundingtype == 0 || fundingtype == null)) {

            isValid = false;
            $('#MsgValidation').html("Please select Project Funding Type");
            $('#ValidationModal').modal('toggle');
            return false;
        }


        var taxservicemode = $("#taxservice").val();
        var projcttype = $('input[name="Prjcttype"]').val();
        var projectsubtype = $('input[name="ProjectSubType"]').val();


        if ((projcttype == 0) && (taxservicemode == 1 || taxservicemode == 2)) {
            $('#MsgValidation').html("Please select project type.");
            $('#ValidationModal').modal('toggle');

        }
        if ((projcttype == 0) && (taxservicemode == 1 || taxservicemode == 2)) {
            $('#MsgValidation').html("Please select project type.");
            $('#ValidationModal').modal('toggle');

        }


        if (isValid)
            $('#formPO').submit();

    }
    function projectDurationValidation() {
        var tentativestartdate = parseDate($("#TentativeStartdate").val());
        var tentativeclosedate = parseDate($("#TentativeClosedate").val());
        //var startdate = $("#Startdate").val();
        //var closedate = $("#Closedate").val();
        //var projectdurationyear = $('input[name="Projectdurationyears"]').val();
        //var projectdurationmonth = $('input[name="Projectdurationmonths"]').val();


        //if (startdate == null || startdate == "" || closedate == null || closedate == "") {
           // var diff_date = tentativeclosedate - tentativestartdate;

           // var years = Math.floor(diff_date / 31536000000);
           // var months = Math.floor((diff_date % 31536000000) / 2628000000);
           // var days = Math.floor(((diff_date % 31536000000) % 2628000000) / 86400000);

           // if (projectdurationyear != years || projectdurationmonth != months) {
           //     $('#MsgValidation').html("The project duration is not equal to selected start and close date.");
           //     $('#ValidationModal').modal('toggle');
           //     return false;
           //}
        //}
        //if (startdate != null && startdate != "" && closedate != null && closedate != "") {
        //    var newstartdate = parseDate(startdate);
        //    var newenddate = parseDate(closedate);

        //    var diff_date = newenddate - newstartdate;

        //    var years = Math.floor(diff_date / 31536000000);
        //    var months = Math.floor((diff_date % 31536000000) / 2628000000);
        //    var days = Math.floor(((diff_date % 31536000000) % 2628000000) / 86400000);

        //    if (projectdurationyear != years || projectdurationmonth != months) {
        //        $('#MsgValidation').html("The project duration is not equal to selected start and close date.");
        //        $('#ValidationModal').modal('toggle');
        //        return false;
        //    }
        //}

        return true;
    }
    function parseDate(s) {
        var months = {
            january: 0, february: 1, march: 2, april: 3, may: 4, june: 5,
            july: 6, august: 7, september: 8, october: 9, november: 10, december: 11
        };
        var p = s.split('-');
        return new Date(p[2], months[p[1].toLowerCase()], p[0]);
    }
    $('#btnupdate').on('click', function (e) {
        // to validate if PI department or PI name is left unselected when either one of them is selected
        e.preventDefault();

        var isValid = $('#formPO').valid();

        // var isValid = $(this).closest("form").valid();
        var pidept = $("#department").val(); //Year, Month, Date
        var piname = $("#PI").val();
        var totalstaffs = $("#totlprjctstaffs").val();
        var sumofstaffs = $("#sumstaffs").val();
        var allocationtotal = $("#ttlallocatedvalue").val();
        var sanctionedvalue = $("#basevalue").val();
        if (sanctionedvalue != allocationtotal) {
            $('#MsgValidation').html("The allocated value is not equal to sanctioned value.");
            $('#ValidationModal').modal('toggle');
            return false;
        }
        if ((pidept > 0) && (piname == null || piname == 0)) {
            $('#MsgValidation').html("Please select Principal Investigator name.");
            $('#ValidationModal').modal('toggle');
            return false;
        }

        if ((pidept == null || pidept == 0) && (piname > 0)) {
            $('#MsgValidation').html("Please select Department of selected Principal Investigator.");
            $('#ValidationModal').modal('toggle');
            return false;
        }
        if ((pidept == 0 || pidept == null) && (piname == null || piname == 0)) {
            $('#MsgValidation').html("Please select Department and Principal Investigator name.");
            $('#ValidationModal').modal('toggle');
            return false;
        }

        // to validate if copi department or copiname is left unselected when either one of them is selected
        var copideptvalues = [];
        var copinamvalues = [];

        $('select[name="CoPIDepartment"]').each(function (idx, val) { copideptvalues.push($(val).val()); });
        $('select[name="CoPIname"]').each(function (idx, val) { copinamvalues.push($(val).val()); });
        //// Sort it
        copideptvalues.sort();
        copinamvalues.sort();

        for (var k = 0; k < copideptvalues.length; ++k) {
            if ((copideptvalues[k] > 0) && (copinamvalues[k] == null || copinamvalues[k] == 0)) {
                $('#MsgValidation').html("Please fill Co PI name.");
                $('#ValidationModal').modal('toggle');
                return false;
            }
            if ((copideptvalues[k] == null || copideptvalues[k] == 0) && (copinamvalues[k] > 0)) {
                $('#MsgValidation').html("Please fill Department of selected Co PI.");
                $('#ValidationModal').modal('toggle');
                return false;
            }
        }
        // duplicate check
        for (var k = 1; k < copinamvalues.length; ++k) {
            if (copinamvalues[k] == copinamvalues[k - 1]) {
                $('#MsgValidation').html("Co PI already selected. Please select a different Co PI.");
                $('#ValidationModal').modal('toggle');
                return false;
            }
        }

        // to validate if attachment type or attachment name is not left blank when either one of them is filled
        var doctypevalues = [];
        var docnamevalues = [];
        $('select[name="DocType"]').each(function (idx, val) { doctypevalues.push($(val).val()); });
        $('input[name="AttachName"]').each(function (idx, val) { docnamevalues.push($(val).val()); });
        //// Sort it
        doctypevalues.sort();
        docnamevalues.sort();
        for (var k = 0; k < doctypevalues.length; ++k) {
            if ((doctypevalues[k] > 0) && ((docnamevalues[k] == null) || docnamevalues[k] == "")) {
                $('#MsgValidation').html("Please fill Attachment name.");
                $('#ValidationModal').modal('toggle');
                return false;
            }
            if ((docnamevalues[k] != null && docnamevalues[k] != "") && (doctypevalues[k] == null || doctypevalues[k] == 0)) {
                $('#MsgValidation').html("Please select Attachment type.");
                $('#ValidationModal').modal('toggle');
                return false;
            }
        }
        // duplicate check
        for (var k = 1; k < doctypevalues.length; ++k) {
            if (doctypevalues[k] == doctypevalues[k - 1]) {
                $('#MsgValidation').html("Selected attachment type already exist. Please select a different attachment type.");
                $('#ValidationModal').modal('toggle');
                return false;
            }
            isValid = true;
        }

        // duplicate check allocation head

        var allocateheads = [];
        $('select[name="Allocationhead"]').each(function (idx, val) { allocateheads.push($(val).val()); });
        allocateheads.sort();
        for (var k = 1; k < allocateheads.length; ++k) {
            if (allocateheads[k] == 1) {
                if (allocateheads[k] == allocateheads[k - 1]) {
                    $('#MsgValidation').html("Allocation head already exist. Please select a different allocation.");
                    $('#ValidationModal').modal('toggle');
                    return false;
                }
            }
            isValid = true;
        }

        if (totalstaffs != sumofstaffs) {
            $('#MsgValidation').html("The project staffs total is not equal to the categorywise total.");
            $('#ValidationModal').modal('toggle');
            return false;
        }

        //var tentativestartdate = new parseDate($("#TentativeStartdate").val());
        //var tentativeclosedate = new parseDate($("#TentativeClosedate").val());
        //var startdate = $("#Startdate").val();
        //var closedate = $("#Closedate").val();
        //var projectdurationyear = $('input[name="Projectdurationyears"]').val();
        //var projectdurationmonth = $('input[name="Projectdurationmonths"]').val();


        //if (startdate == null || startdate == "" || closedate == null || closedate == "") {
            //var diff_date = tentativeclosedate - tentativestartdate;

            //var years = Math.floor(diff_date / 31536000000);
            //var months = Math.floor((diff_date % 31536000000) / 2628000000);
            //var days = Math.floor(((diff_date % 31536000000) % 2628000000) / 86400000);

            //if (projectdurationyear != years || projectdurationmonth != months) {
            //    $('#MsgValidation').html("The project duration is not equal to selected start and close date.");
            //    $('#ValidationModal').modal('toggle');
            //    return false;
            //}
        //}
        //if (startdate != null && startdate != "" && closedate != null && closedate != "") {
        //    var newstartdate = new parseDate(startdate);
        //    var newenddate = new parseDate(closedate);

        //    var diff_date = newenddate - newstartdate;

        //    var years = Math.floor(diff_date / 31536000000);
        //    var months = Math.floor((diff_date % 31536000000) / 2628000000);
        //    var days = Math.floor(((diff_date % 31536000000) % 2628000000) / 86400000);

        //    if (projectdurationyear != years || projectdurationmonth != months) {
        //        $('#MsgValidation').html("The project duration is not equal to selected start and close date.");
        //        $('#ValidationModal').modal('toggle');
        //        return false;
        //    }
        //}


        var taxservicemode = $("#taxservice").val();
        var projcttype = $('input[name="Prjcttype"]').val();
        var projectsubtype = $('input[name="ProjectSubType"]').val();

        if (projcttype == 2 && taxservicemode == 1) {
            $("#indprojectstate").show();
            $("#indprojectlocation").show();

            $("#forignprojectcntry").hide();
            $("#forignprojectstate").hide();
            $("#forignprojectlocation").hide();
            $("#taxregistatus").hide();
            $("#constaxservicegst").show();
            var gst = $("#gstnumbr").val();
            if (gst == null || gst == "") {
                isValid = false;
                $('#MsgValidation').html("Please fill GSTIN");
                $('#ValidationModal').modal('toggle');
                return false;
            }
        }
        //        $("#sponextrnlscheme").addClass('dis-none')
        if ((projcttype == 2) && taxservicemode == 2) {
            $("#indprojectstate").show();
            $("#indprojectlocation").show();

            $("#forignprojectcntry").hide();
            $("#forignprojectstate").hide();
            $("#forignprojectlocation").hide();
            $("#taxregistatus").show();
            $("#constaxservicegst").show();
        }
        if ((projcttype == 2) && taxservicemode == 3) {
            $("#indprojectstate").hide();
            $("#indprojectlocation").hide();

            $("#forignprojectcntry").show();
            $("#forignprojectstate").show();
            $("#forignprojectlocation").show();
            $("#taxregistatus").hide();
            $("#constaxservicegst").hide();
        }
        if (projcttype == 2 && taxservicemode == 0) {
            $("#taxregistatus").hide();
            $("#constaxservicegst").hide();
            $("#forignprojectcntry").hide();
            $("#forignprojectstate").hide();
            $("#forignprojectlocation").hide();
            $("#indprojectstate").hide();
            $("#indprojectlocation").hide();
        }
        if ((projcttype == 0) && (taxservicemode == 1 || taxservicemode == 2)) {
            $('#MsgValidation').html("Please select project type.");
            $('#ValidationModal').modal('toggle');

        }
        if ((projcttype == 0) && (taxservicemode == 1 || taxservicemode == 2)) {
            $('#MsgValidation').html("Please select project type.");
            $('#ValidationModal').modal('toggle');

        }

        if (isValid)
            $('#formPO').submit();

    });





    $(document).on('click', '#divContent button[name="removeButton"]', function () {
        $(this).parent().parent("Div").remove();
    });

    $('#btnAddDoc').click(function () {
        var cln = $("#DocprimaryDiv").clone().find("input").val("").end();
        $(cln).find('.dis-none').removeClass('dis-none');
        $(cln).find('.doclink').addClass('dis-none');
        $(cln).insertBefore($('#DocdivContent').find('.p-b-sm'));

    });


    $(document).on('click', '#DocdivContent button[name="removeButton"]', function () {
        $(this).parent().parent("Div").remove();
    });



    $("#department").change(function () {
        var Departmentid = $(this).val();
        $.getJSON("../Account/LoadPIByDepartment", { Departmentid: Departmentid },
                    function (locationdata) {
                        var select = $("#PI");
                        select.empty();

                        $.each(locationdata, function (index, itemData) {

                            select.append($('<option/>', {
                                value: itemData.id,
                                text: itemData.name
                            }));
                        });
                        select.selectpicker('refresh');
                    });
    });
    $("#PI").change(function () {
        var PIId = $(this).val();
        $.getJSON("../Account/LoadPIDesignation", { PIid: PIId },
                    function (locationdata) {
                        var select = $("#PIdesig");
                        select.empty();

                        $.each(locationdata, function (index, itemData) {

                            select.append($('<option/>', {
                                value: itemData.id,
                                text: itemData.name
                            }));
                        });
                    });
    });

    $(document).on('change', 'select[name="CoPIDepartment"]', function () {
        var Departmentid = $(this).val();
        //var index = $(this).closest('#primaryDiv').index();
        //var select = $(this).closest('#primaryDiv').find('select[name="CoPIname"]');
        var select = $(this).closest('#primaryDiv').find('select[name="CoPIname"]');
        $(select).empty().selectpicker('refresh');
        $.getJSON("@Url.Action("LoadPIByDepartment", "Account")", { Departmentid: Departmentid },
                    function (locationdata) {
                        // $(select).selectpicker("destroy");
                        $.each(locationdata, function (index, itemData) {
                            $(select).append($('<option/>', {
                                value: itemData.id,
                                text: itemData.name
                            })).selectpicker('refresh');
                        });
                    });

    });
    $(document).on('change', 'select[name="CoPIname"]', function () {
        var CoPIid = $(this).val();
        var CoPIEmail = $(this).closest('#primaryDiv').find('input[name="CoPIEmail"]');
        if (CoPIid > 0)
        {
            $.getJSON("@Url.Action("LoadPIEmailById", "Account")", { Profid: CoPIid },
                    function (locationdata) {
                        CoPIEmail.val(locationdata.name);
                    });
        }
        else
        {
            var Copiid = 0;
            $.getJSON("../Account/LoadPIEmailById", { Profid: Copiid },
                    function (locationdata) {
                        CoPIEmail.val(locationdata.name);
                    });
        }
    });
    $(document).on('change', 'select[name="PIname"]', function () {
        var PIid = $(this).val();
        if (PIid > 0)
        {
            $.getJSON("@Url.Action("LoadPIEmailById", "Account")", { Profid: PIid },
                    function (locationdata) {
                        $('#PIEmail').val(locationdata.name);
                    });
        } else {
            $('#PIEmail').val('');
        }
    });
    function isNumberKey(evt) {
        var charCode = (evt.which) ? evt.which : evt.keyCode;
        if (charCode != 46 && charCode > 31
          && (charCode < 48 || charCode > 57))
            return false;

        return true;
    }
    function noedit() {
        return false;
    }
    $('#propslnum, #CoPIRMF, #CoPIPCF,#PIRMF,#PIPCF,input[name $=".EMIValue"], input[name $=".AllocationValueYW"]').on("copy cut paste drop", function () {
        return false;
    });

    $('#indprjctfundedby_1').css("display", "none");
    $('#forgnprjctfundedby_1, .forgnPrjctDet').css("display", "none");
    $('#indprjctcategory_1').css("display", "none");
    $('#indprjctfundbodygovt_1').css("display", "none");
    $('#indprjctfundbodynongovt_1').css("display", "none");
    $('#forgnprjctfundbodygovt_1').css("display", "none");
    $('#forgnprjctfundbodynongovt_1').css("display", "none");
    $('.conforgnPrjctDet').css("display", "none");
    $("#indprjctfundbodygovtagncydeptnam_1").css("display", "none");
    $("#indprjctfundbodygovtdeptamt_1").css("display", "none");

    $("#indprjctfundbodygovtagncymnstrynam_1").css("display", "none");
    $("#indprjctfundbodygovtmnstryamt_1").css("display", "none");

    $("#indprjctfundbodygovtunivnam_1").css("display", "none");
    $("#indprjctfundbodygovtunivamt_1").css("display", "none");

    $("#indprjctfundbodynongovtagncyindstrynam_1").css("display", "none");
    $("#indprjctfundbodynongovtindstryamt_1").css("display", "none");

    $("#indprjctfundbodynongovtunivnam_1").css("display", "none");
    $("#indprjctfundbodynongovtunivamt_1").css("display", "none");

    $("#indprjctfundbodynongovtagncyothersnam_1").css("display", "none");
    $("#indprjctfundbodynongovtothersamt_1").css("display", "none");

    $("#forgnprjctfundbodygovtcntry_1").css("display", "none");
    $("#forgnprjctfundbodygovtagncydeptnam_1").css("display", "none");
    $("#forgnprjctfundbodygovtdeptamt_1").css("display", "none");

    $("#forgnprjctfundbodygovtunivcntry_1").css("display", "none");
    $("#forgnprjctfundbodygovtagncyunivnam_1").css("display", "none");
    $("#forgnprjctfundbodygovtunivamt_1").css("display", "none");

    $("#forgnprjctfundbodygovtothrscntry_1").css("display", "none");
    $("#forgnprjctfundbodygovtagncyothrsnam_1").css("display", "none");
    $("#forgnprjctfundbodygovtothrsamt_1").css("display", "none");

    $("#forgnprjctfundbodynongovtcntry_1 ").css("display", "none");
    $("#forgnprjctfundbodynongovtagncydeptnam_1 ").css("display", "none");
    $("#forgnprjctfundbodynongovtdeptamt_1").css("display", "none");

    $("#forgnprjctfundbodynongovtunivcntry_1").css("display", "none");
    $("#forgnprjctfundbodynongovtagncyunivnam_1 ").css("display", "none");
    $("#forgnprjctfundbodynongovtunivamt_1").css("display", "none");

    $("#forgnprjctfundbodynongovtothrscntry_1").css("display", "none");
    $("#forgnprjctfundbodynongovtagncyothrsnam_1").css("display", "none");
    $("#forgnprjctfundbodynongovtothrsamt_1").css("display", "none");

    $("#prjctfundingtype").change(function () {
        var fundingtype = $(this).val();
        if (fundingtype == 3) {
            $('#IndAndBoth, #ForgnAndBoth').val('True');
            $('#indprjctfundedby_1, #forgnprjctfundedby_1, #indprjctcategory_1, .forgnPrjctDet').css("display", "block");
        } else if (fundingtype == 2) {
            $('#forgnprjctfundedby_1, .forgnPrjctDet').css("display", "block");
            $('#ForgnAndBoth').val('True');
            $('#IndAndBoth, #NonGovAndBoth, #GovAndBoth').val('False');
            $('#indprjctfundedby_1, #indprjctcategory_1').css("display", "none");
            $('#prjctfundedby, #projectcategory').val('');
            $('#indprjctfundbodynongovt_1, #indprjctfundbodygovt_1').css("display", "none");
            $('#Indfundgovtbody, #Indfundnongovtbody').selectpicker('deselectAll');
            $('input[id^="indprjctfundbodygovt_"], select[id^="indprjctfundbodygovt_"], input[id^="indprjctfundbodynongovt_"]').val('');
        } else if (fundingtype == 1) {
            $('#forgnprjctfundedby_1, .forgnPrjctDet').css("display", "none");
            $('#IndAndBoth').val('True');
            $('#ForgnAndBoth, #ForgnGovAndBoth, #ForgnNonGovAndBoth').val('False');
            $('#prjctforeignfundedby').val('');
            $('#indprjctfundedby_1, #indprjctcategory_1').css("display", "block");
            $('#forgnprjctfundbodynongovt_1, #forgnprjctfundbodygovt_1').css("display", "none");
            $('#Forgnfundgovtbody, #Forgnfundnongovtbody').selectpicker('deselectAll');
            $('input[id^="forgnprjctfundbodygovt_"], select[id^="forgnprjctfundbodygovt_"], input[id^="forgnprjctfundbodynongovt_"], select[id^="forgnprjctfundbodynongovt_"]').val('');
        } else {
            $('#IndAndBoth, #ForgnAndBoth, #NonGovAndBoth, #GovAndBoth, #ForgnGovAndBoth, #ForgnNonGovAndBoth').val('False');
            $('#indprjctfundedby_1, #indprjctcategory_1, #forgnprjctfundedby_1, .forgnPrjctDet').css("display", "none");
            $('#prjctfundedby, #projectcategory, #prjctforeignfundedby').val('');

            $('#indprjctfundbodynongovt_1, #indprjctfundbodygovt_1').css("display", "none");
            $('#Indfundgovtbody, #Indfundnongovtbody').selectpicker('deselectAll');
            $('input[id^="indprjctfundbodygovt_"], select[id^="indprjctfundbodygovt_"], input[id^="indprjctfundbodynongovt_"]').val('');

            $('#forgnprjctfundbodynongovt_1, #forgnprjctfundbodygovt_1').css("display", "none");
            $('#Forgnfundgovtbody, #Forgnfundnongovtbody').selectpicker('deselectAll');
            $('input[id^="forgnprjctfundbodygovt_"], select[id^="forgnprjctfundbodygovt_"], input[id^="forgnprjctfundbodynongovt_"], select[id^="forgnprjctfundbodynongovt_"]').val('');
        }
        fundbodyUpdate();
    });
    $("#prjctforeignfundedby").change(function () {
        
        var foreignfundedby = $(this).val();
        if (foreignfundedby == 3) {
            $('#forgnprjctfundbodygovt_1, #forgnprjctfundbodynongovt_1').css("display", "block");
            $('#ForgnGovAndBoth, #ForgnNonGovAndBoth').val('True');
        } else if (foreignfundedby == 2) {
            $('#ForgnNonGovAndBoth').val('True');
            $('#ForgnGovAndBoth').val('False');
            $('#forgnprjctfundbodynongovt_1').css("display", "block");
            $('#forgnprjctfundbodygovt_1').css("display", "none");
            $('#Forgnfundgovtbody').selectpicker('deselectAll');
            //$('#forgnprjctfundbodygovt_Agencydeptname, #forgnprjctfundbodygovt_country, #forgnprjctfundbodygovt_Agencydeptamt, #forgnprjctfundbodygovt_Agencyunivname, #forgnprjctfundbodygovt_univcountry, #forgnprjctfundbodygovt_univAmount, #forgnprjctfundbodygovt_othersagncyname, #forgnprjctfundbodygovt_otherscountry, #forgnprjctfundbodygovt_othersAmount').val('');
            $('input[id^="forgnprjctfundbodygovt_"], select[id^="forgnprjctfundbodygovt_"]').val('');
        } else if (foreignfundedby == 1) {
            $('#ForgnNonGovAndBoth').val('False');
            $('#ForgnGovAndBoth').val('True');
            $('#forgnprjctfundbodynongovt_1').css("display", "none");
            $('#forgnprjctfundbodygovt_1').css("display", "block");
            $('#Forgnfundnongovtbody').selectpicker('deselectAll');
            //$('#forgnprjctfundbodynongovt_Agencydeptname, #forgnprjctfundbodynongovt_country, #forgnprjctfundbodynongovt_deptAmount, #forgnprjctfundbodynongovt_Agencyunivname, #forgnprjctfundbodynongovt_univcountry, #forgnprjctfundbodynongovt_univAmount, #forgnprjctfundbodynongovt_othersagncyname, #forgnprjctfundbodynongovt_otherscountry, #forgnprjctfundbodynongovt_othersAmount').val('');
            $('input[id^="forgnprjctfundbodynongovt_"], select[id^="forgnprjctfundbodynongovt_"]').val('');
        } else {
            $('#ForgnGovAndBoth, #ForgnNonGovAndBoth').val('False');
            $('#forgnprjctfundbodynongovt_1, #forgnprjctfundbodygovt_1').css("display", "none");
            $('#Forgnfundgovtbody, #Forgnfundnongovtbody').selectpicker('deselectAll');
            $('input[id^="forgnprjctfundbodygovt_"], select[id^="forgnprjctfundbodygovt_"], input[id^="forgnprjctfundbodynongovt_"], select[id^="forgnprjctfundbodynongovt_"]').val('');
        }
        fundbodyUpdate();
    });
    $("#prjctfundedby").change(function () {
        var indFundBody = $(this).val();
        if (indFundBody == 3) {
            $('#indprjctfundbodygovt_1, #indprjctfundbodynongovt_1').css("display", "block");
            $('#NonGovAndBoth, #GovAndBoth').val('True');
        } else if (indFundBody == 2) {
            $('#indprjctfundbodynongovt_1').css("display", "block");
            $('#indprjctfundbodygovt_1').css("display", "none");
            $('#NonGovAndBoth').val('True');
            $('#GovAndBoth').val('False');
            $('#Indfundgovtbody').selectpicker('deselectAll');
            //$('#indprjctfundbodygovt_Agencydeptname, #indprjctfundbodygovt_deptAmount, #indprjctfundbodygovt_Agencymnstryname, #indprjctfundbodygovt_mnstryAmount, #indprjctfundbodygovt_Agencyunivname, #indprjctfundbodygovt_univAmount').val();
            $('input[id^="indprjctfundbodygovt_"], select[id^="indprjctfundbodygovt_"]').val('');
        } else if (indFundBody == 1) {
            $('#indprjctfundbodynongovt_1').css("display", "none");
            $('#indprjctfundbodygovt_1').css("display", "block");
            $('#NonGovAndBoth').val('False');
            $('#GovAndBoth').val('True');
            $('#Indfundnongovtbody').selectpicker('deselectAll');
            //$('#indprjctfundbodynongovt_AgencyIndstryname, #indprjctfundbodynongovt_IndstryAmount, #indprjctfundbodynongovt_Agencyunivname, #indprjctfundbodynongovt_univAmount, #indprjctfundbodynongovt_Agencyothersname, #indprjctfundbodynongovt_othersAmount').val('');
            $('input[id^="indprjctfundbodynongovt_"]').val('');
        } else {
            $('#indprjctfundbodynongovt_1, #indprjctfundbodygovt_1').css("display", "none");
            $('#NonGovAndBoth, #GovAndBoth').val('False');
            $('#Indfundgovtbody, #Indfundnongovtbody').selectpicker('deselectAll');
            $('input[id^="indprjctfundbodygovt_"], select[id^="indprjctfundbodygovt_"], input[id^="indprjctfundbodynongovt_"]').val('');
        }
        fundbodyUpdate();
    });
    function fundbodyUpdate() {
        $('#IndGovFund_MHRD, #IndGovFund_Mnstry, #IndGovFund_Univ, #IndNonGovFund_Indus, #IndNonGovFund_Univ, #IndNonGovFund_Other, #ForgnGovFund_Dep,  #ForgnGovFund_Univ, #ForgnGovFund_Other, #ForgnNonGovFund_Dep, #ForgnNonGovFund_Univ, #ForgnNonGovFund_Other').val('False');
        $('#indprjctfundbodygovtagncydeptnam_1, #indprjctfundbodygovtdeptamt_1, #indprjctfundbodygovtagncymnstrynam_1, #indprjctfundbodygovtmnstryamt_1, #indprjctfundbodygovtunivnam_1, #indprjctfundbodygovtunivamt_1').css("display", "none");
        $('#indprjctfundbodynongovtagncyindstrynam_1, #indprjctfundbodynongovtindstryamt_1, #indprjctfundbodynongovtunivnam_1, #indprjctfundbodynongovtunivamt_1, #indprjctfundbodynongovtagncyothersnam_1, #indprjctfundbodynongovtothersamt_1').css("display", "none");
        $("#forgnprjctfundbodygovtcntry_1, #forgnprjctfundbodygovtagncydeptnam_1, #forgnprjctfundbodygovtdeptamt_1, #forgnprjctfundbodygovtunivcntry_1, #forgnprjctfundbodygovtagncyunivnam_1 , #forgnprjctfundbodygovtunivamt_1, #forgnprjctfundbodygovtothrscntry_1, #forgnprjctfundbodygovtagncyothrsnam_1, #forgnprjctfundbodygovtothrsamt_1").css("display", "none");
        $("#forgnprjctfundbodynongovtcntry_1, #forgnprjctfundbodynongovtagncydeptnam_1, #forgnprjctfundbodynongovtdeptamt_1, #forgnprjctfundbodynongovtunivcntry_1, #forgnprjctfundbodynongovtagncyunivnam_1, #forgnprjctfundbodynongovtunivamt_1, #forgnprjctfundbodynongovtothrscntry_1, #forgnprjctfundbodynongovtagncyothrsnam_1, #forgnprjctfundbodynongovtothrsamt_1").css("display", "none");
        $('select[id$="govtbody"].selectpicker').each(function (ind, ele) {
            var selBodys = $(this).val();
            if ($(this).attr('id') == 'Indfundgovtbody' && selBodys != null) {
                $.each(selBodys, function (index, value) {
                    if (value == 1) {
                        $("#indprjctfundbodygovtagncydeptnam_1").css("display", "block");
                        $("#indprjctfundbodygovtdeptamt_1").css("display", "block");
                        $('#IndGovFund_MHRD').val('True');
                    } else if (value == 2) {
                        $("#indprjctfundbodygovtagncymnstrynam_1").css("display", "block");
                        $("#indprjctfundbodygovtmnstryamt_1").css("display", "block");
                        $('#IndGovFund_Mnstry').val('True');
                    } else if (value == 3) {
                        $("#indprjctfundbodygovtunivnam_1").css("display", "block");
                        $("#indprjctfundbodygovtunivamt_1").css("display", "block");
                        $('#IndGovFund_Univ').val('True');
                    }
                });
            } else if ($(this).attr('id') == 'Indfundnongovtbody' && selBodys != null) {
                $.each(selBodys, function (index, value) {
                    if (value == 1) {
                        $("#indprjctfundbodynongovtagncyindstrynam_1").css("display", "block");
                        $("#indprjctfundbodynongovtindstryamt_1").css("display", "block");
                        $('#IndNonGovFund_Indus').val('True');
                    } else if (value == 2) {
                        $("#indprjctfundbodynongovtunivnam_1").css("display", "block");
                        $("#indprjctfundbodynongovtunivamt_1").css("display", "block");
                        $('#IndNonGovFund_Univ').val('True');
                    } else if (value == 3) {
                        $("#indprjctfundbodynongovtagncyothersnam_1").css("display", "block");
                        $("#indprjctfundbodynongovtothersamt_1").css("display", "block");
                        $('#IndNonGovFund_Other').val('True');
                    }
                });
            } else if ($(this).attr('id') == 'Forgnfundgovtbody' && selBodys != null) {
                $.each(selBodys, function (index, value) {
                    if (value == 1) {
                        $("#forgnprjctfundbodygovtcntry_1").css("display", "block");
                        $("#forgnprjctfundbodygovtagncydeptnam_1").css("display", "block");
                        $("#forgnprjctfundbodygovtdeptamt_1").css("display", "block");
                        $('#ForgnGovFund_Dep').val('True');
                    } else if (value == 2) {
                        $("#forgnprjctfundbodygovtunivcntry_1").css("display", "block");
                        $("#forgnprjctfundbodygovtagncyunivnam_1").css("display", "block");
                        $("#forgnprjctfundbodygovtunivamt_1").css("display", "block");
                        $('#ForgnGovFund_Univ').val('True');
                    } else if (value == 3) {
                        $("#forgnprjctfundbodygovtothrscntry_1").css("display", "block");
                        $("#forgnprjctfundbodygovtagncyothrsnam_1").css("display", "block");
                        $("#forgnprjctfundbodygovtothrsamt_1").css("display", "block");
                        $('#ForgnGovFund_Other').val('True');
                    }
                });
            } else if ($(this).attr('id') == 'Forgnfundnongovtbody' && selBodys != null) {
                $.each(selBodys, function (index, value) {
                    if (value == 1) {
                        $("#forgnprjctfundbodynongovtcntry_1 ").css("display", "block");
                        $("#forgnprjctfundbodynongovtagncydeptnam_1 ").css("display", "block");
                        $("#forgnprjctfundbodynongovtdeptamt_1").css("display", "block");
                        $('#ForgnNonGovFund_Dep').val('True');
                    } else if (value == 2) {
                        $("#forgnprjctfundbodynongovtunivcntry_1").css("display", "block");
                        $("#forgnprjctfundbodynongovtagncyunivnam_1 ").css("display", "block");
                        $("#forgnprjctfundbodynongovtunivamt_1").css("display", "block");
                        $('#ForgnNonGovFund_Univ').val('True');
                    } else if (value == 3) {
                        $("#forgnprjctfundbodynongovtagncyothrsnam_1").css("display", "block");
                        $("#forgnprjctfundbodynongovtothrscntry_1 ").css("display", "block");
                        $("#forgnprjctfundbodynongovtothrsamt_1").css("display", "block");
                        $('#ForgnNonGovFund_Other').val('True');
                    }
                });
            }
        });
    }
    $("#Indfundgovtbody").change(function () {
        fundbodyUpdate();
    });

    $("#Indfundnongovtbody").change(function () {
        fundbodyUpdate();
    });

    $("#Forgnfundgovtbody").change(function () {
        fundbodyUpdate();
    });

    $("#Forgnfundnongovtbody").change(function () {
        fundbodyUpdate();
    });

    $("#Prjcttype").change(function () {

        var typeid = $(this).val();
        var fundedby = $("#ProjectconsFundingType_").val();
        if (typeid == 1) {
            $.getJSON("../Account/LoadSponPrjctsubtypebytype", { typeid: typeid },
                        function (locationdata) {
                            var select = $("#pjctsubtyp");
                            select.empty();

                            $.each(locationdata, function (index, itemData) {

                                select.append($('<option/>', {
                                    value: itemData.codevalAbbr,
                                    text: itemData.CodeValDetail,
                                }));
                            });
                        });
            $.getJSON("../Account/LoadPrjctcategorybytype", { typeid: typeid },
                   function (locationdata) {
                       var select = $("#schemename");
                       select.empty();

                       $.each(locationdata, function (index, itemData) {

                           select.append($('<option/>', {
                               value: itemData.id,
                               text: itemData.name,
                           }));
                       });
                   });
        }
        if (typeid == 2) {
            $.getJSON("../Account/LoadConsPrjctsubtypebytype", { typeid: typeid },
                        function (locationdata) {
                            var select = $("#pjctsubtyp");
                            select.empty();

                            $.each(locationdata, function (index, itemData) {

                                select.append($('<option/>', {
                                    value: itemData.codevalAbbr,
                                    text: itemData.CodeValDetail,
                                }));
                            });
                        });
            $.getJSON("../Account/LoadPrjctcategorybytype", { typeid: typeid },
                   function (locationdata) {
                       var select = $("#schemename");
                       select.empty();

                       $.each(locationdata, function (index, itemData) {

                           select.append($('<option/>', {
                               value: itemData.id,
                               text: itemData.name,
                           }));
                       });
                   });
        }
        var subtypeid = $("#pjctsubtyp").val();

        if (typeid == 1 && subtypeid == 1) {
            $("#sponextrnlscheme").addClass('dis-none');
            $("#sponextrnlschemecode").addClass('dis-none');
            $("#externalagency").addClass('dis-none');
            $("#internalagency").removeClass('dis-none');
            //        $("#sponextrnlscheme").addClass('dis-none')
        }
        if (typeid == 1 && subtypeid == 2) {
            $("#sponextrnlscheme").removeClass('dis-none');
            $("#sponextrnlschemecode").removeClass('dis-none');
            $("#externalagency").removeClass('dis-none');
            $("#internalagency").addClass('dis-none');

        }

        if (typeid == 1 && subtypeid == 0) {
            $("#sponextrnlscheme").addClass('dis-none');
            $("#sponextrnlschemecode").addClass('dis-none');
            $("#externalagency").addClass('dis-none');
            $("#internalagency").addClass('dis-none');
        }


        //if(typeid == 2 || typeid == 0){
        //    $('#indprjctcategory_1').css("display", "none");
        //}

        if (typeid == 0) {
            $('#prjcttypespon').hide();
            $('#prjcttypeconsul').hide();
            $("#sponextrnlscheme").addClass('dis-none');
            $("#sponextrnlschemecode").addClass('dis-none');
            $("#externalagency").addClass('dis-none');
            $("#internalagency").addClass('dis-none');
            $('#indprjctcategory_1').css("display", "none");
            $('#prjctdetails1').css("display", "none");
            $('#prjctdetails2').css("display", "none");
        }

        if (typeid == 1) {
            $('#prjcttypespon').show();
            $('#prjcttypeconsul').hide();
            $('#indprjctcategory_1').css("display", "none");
            $('#prjctdetails1').css("display", "block");
            $('#prjctdetails2').css("display", "none");
            $('#taxnumberdtls').hide();
            $('#constaxdetails').hide();
            $('#constaxservicemode').hide();
        }

        if (typeid == 2) {
            $('#prjcttypeconsul').show();
            $('#prjcttypespon').hide();
            $('#indprjctcategory_1').css("display", "none");
            $('#prjctdetails1').css("display", "none");
            $('#prjctdetails2').css("display", "block");
            $('#taxnumberdtls').show();
            $('#constaxdetails').show();
            $('#constaxservicemode').show();
        }


    });

    $("#pjctsubtyp").change(function () {
        var subtype = $(this).val();
        var type = $("#Prjcttype").val();
        if (type == 1 && subtype == 1) {
            $("#sponextrnlscheme").addClass('dis-none')
            $("#sponextrnlschemecode").addClass('dis-none');
            $("#externalagency").addClass('dis-none');
            $("#internalagency").removeClass('dis-none');
            $("#prjctdetails1").addClass('dis-none');
        }

        if (type == 1 && subtype == 2) {
            $("#sponextrnlscheme").removeClass('dis-none')
            $("#sponextrnlschemecode").removeClass('dis-none');
            $("#externalagency").removeClass('dis-none');
            $("#internalagency").addClass('dis-none');
            $("#prjctdetails1").removeClass('dis-none');
        }

        if (type == 1 && subtype == 0) {
            $("#sponextrnlscheme").addClass('dis-none')
            $("#sponextrnlschemecode").addClass('dis-none');
            $("#externalagency").addClass('dis-none');
            $("#internalagency").addClass('dis-none');
            $("#prjctdetails1").addClass('dis-none');
        }

        if (type == 2 || type == 0) {
            $("#sponextrnlscheme").addClass('dis-none')
            $("#sponextrnlschemecode").addClass('dis-none');
            $("#externalagency").addClass('dis-none');
            $("#internalagency").addClass('dis-none');

        }
        if (subtype != 2) {
            $('#IndGovFund_MHRD, #IndGovFund_Mnstry, #IndGovFund_Univ, #IndNonGovFund_Indus, #IndNonGovFund_Univ, #IndNonGovFund_Other, #ForgnGovFund_Dep,  #ForgnGovFund_Univ, #ForgnGovFund_Other, #ForgnNonGovFund_Dep, #ForgnNonGovFund_Univ, #ForgnNonGovFund_Other').val('False');
            $('#indprjctfundbodygovtagncydeptnam_1, #indprjctfundbodygovtdeptamt_1, #indprjctfundbodygovtagncymnstrynam_1, #indprjctfundbodygovtmnstryamt_1, #indprjctfundbodygovtunivnam_1, #indprjctfundbodygovtunivamt_1').css("display", "none");
            $('#indprjctfundbodynongovtagncyindstrynam_1, #indprjctfundbodynongovtindstryamt_1, #indprjctfundbodynongovtunivnam_1, #indprjctfundbodynongovtunivamt_1, #indprjctfundbodynongovtagncyothersnam_1, #indprjctfundbodynongovtothersamt_1').css("display", "none");
            $("#forgnprjctfundbodygovtcntry_1, #forgnprjctfundbodygovtagncydeptnam_1, #forgnprjctfundbodygovtdeptamt_1, #forgnprjctfundbodygovtunivcntry_1, #forgnprjctfundbodygovtagncyunivnam_1 , #forgnprjctfundbodygovtunivamt_1, #forgnprjctfundbodygovtothrscntry_1, #forgnprjctfundbodygovtagncyothrsnam_1, #forgnprjctfundbodygovtothrsamt_1").css("display", "none");
            $("#forgnprjctfundbodynongovtcntry_1, #forgnprjctfundbodynongovtagncydeptnam_1, #forgnprjctfundbodynongovtdeptamt_1, #forgnprjctfundbodynongovtunivcntry_1, #forgnprjctfundbodynongovtagncyunivnam_1, #forgnprjctfundbodynongovtunivamt_1, #forgnprjctfundbodynongovtothrscntry_1, #forgnprjctfundbodynongovtagncyothrsnam_1, #forgnprjctfundbodynongovtothrsamt_1").css("display", "none");
        }else{
            fundbodyUpdate();
        }
    });
    $("#taxregistatus").hide();
    $("#taxservice").change(function () {
        var taxservicemode = $(this).val();
        var type = $("#Prjcttype").val();
        var subtype = $("#pjctsubtyp").val();
        $('#IndTaxService').val('false');
        if (type == 2 && taxservicemode == 1) {
            $("#indprojectstate").show();
            $("#indprojectlocation").show();

            $("#forignprojectcntry").hide();
            $("#forignprojectstate").hide();
            $("#forignprojectlocation").hide();
            $("#taxregistatus").hide();
            $("#constaxservicegst").show();
            $('#IndTaxService').val('true');
            //var gst = $("#constaxservicegst").val();
            //if (gst == null || gst == "") {
            //    isValid = false;
            //    $('#MsgValidation').html("Please fill GSTIN");
            //    $('#ValidationModal').modal('toggle');
            //    return false;
            //}
        }
        //        $("#sponextrnlscheme").addClass('dis-none')
        if (type == 2 && taxservicemode == 2) {
            $("#indprojectstate").show();
            $("#indprojectlocation").show();
            $('#IndTaxService').val('true');
            $("#forignprojectcntry").hide();
            $("#forignprojectstate").hide();
            $("#forignprojectlocation").hide();
            $("#taxregistatus").show();
            $("#constaxservicegst").show();
        }
        if (type == 2 && taxservicemode == 3) {
            $("#indprojectstate").hide();
            $("#indprojectlocation").hide();

            $("#forignprojectcntry").show();
            $("#forignprojectstate").show();
            $("#forignprojectlocation").show();
            $("#taxregistatus").hide();
            $("#constaxservicegst").hide();
        }
        if (type == 2 && taxservicemode == 0) {
            $("#taxregistatus").hide();
            $("#constaxservicegst").hide();
            $("#forignprojectcntry").hide();
            $("#forignprojectstate").hide();
            $("#forignprojectlocation").hide();
            $("#indprojectstate").hide();
            $("#indprojectlocation").hide();
        }
        if ((type == 0) && (taxservicemode == 1 || taxservicemode == 2)) {
            $('#MsgValidation').html("Please select project type.");
            $('#ValidationModal').modal('toggle');

        }
        if ((type == 0) && (taxservicemode == 1 || taxservicemode == 2)) {
            $('#MsgValidation').html("Please select project type.");
            $('#ValidationModal').modal('toggle');

        }

    });

    $('#btnAddotherinstCoPI').click(function () {
        var cln = $("#primaryotherinstcopiDiv").clone().find("input").val("").end();
        var cloneElement = $("#primaryotherinstcopiDiv").find('#OtherinstituteCoPI').parent().clone();
        $(cln).find('.dis-none').removeClass('dis-none');
        $(cln).insertBefore($(this).closest('#divotherinstcopiContent').find('.p-b-sm'));

    });

    $(document).on('click', '#divotherinstcopiContent button[name="removeButton"]', function () {
        $(this).parent().parent("Div").remove();
    });
    function calculatestaffSum() {

        var enhanceallocatevalue = [];
        var headwisetotalvalue = [];
        var staffcount = [];
        var staffsalary = [];

        $('input[name="NoofStaffs"]').each(function (idx, val) { staffcount.push($(val).val()); });
        $('input[name="SalaryofStaffs"]').each(function (idx, val) { staffsalary.push($(val).val()); });

        staffcount.sort();
        staffsalary.sort();
        var totalstaff = 0;
        var totalsalary = 0;
        $.each(staffcount, function (i, val) {

            if (i == 0) {

                var txtstaffValue = document.getElementsByName('NoofStaffs')[0].value;
                var txtsalaryValue = document.getElementsByName('SalaryofStaffs')[0].value;
                totalstaff += parseFloat(txtstaffValue) || 0;
                totalsalary += parseFloat(txtsalaryValue) || 0;

                if (!isNaN(totalstaff)) {
                    $("#sumstaffs").val(totalstaff.toFixed(0));
                    // document.getElementsByName('TotalEnhancedAllocationvalue')[0].value = result;
                }
                if (!isNaN(totalsalary)) {
                    $("#sumstaffssalry").val(totalsalary.toFixed(0));
                    // document.getElementsByName('TotalEnhancedAllocationvalue')[0].value = result;
                }

            } else {

                var txtstaffValue = document.getElementsByName('NoofStaffs')[i].value;
                var txtsalaryValue = document.getElementsByName('SalaryofStaffs')[i].value;
                totalstaff += parseFloat(txtstaffValue) || 0;
                totalsalary += parseFloat(txtsalaryValue) || 0;

                if (!isNaN(totalstaff)) {
                    $("#sumstaffs").val(totalstaff.toFixed(0));
                    // document.getElementsByName('TotalEnhancedAllocationvalue')[0].value = result;
                }
                if (!isNaN(totalsalary)) {
                    $("#sumstaffssalry").val(totalsalary.toFixed(0));
                    // document.getElementsByName('TotalEnhancedAllocationvalue')[0].value = result;
                }
            }
        });
    }



    $('#CollabCoordinator,#CollabType').hide();
    $('#CollabAgency').hide();
    $('#CollabCoordinatorEmail').hide();
    $('#TotalCost').hide();
    $('#IITMCost').hide();
    $("#typeofproject").change(function () {
        var TypeofProject = $(this).val();
        if (TypeofProject == 1 || TypeofProject == 0 || TypeofProject == null) {
            $('#CollabCoordinator,#CollabType').hide();
            $('#CollabAgency').hide();
            $('#CollabCoordinatorEmail').hide();
            $('#TotalCost').hide();
            $('#IITMCost').hide();
        }
        if (TypeofProject == 2) {
            $('#CollabCoordinator,#CollabType').show();
            $('#CollabAgency').show();
            $('#CollabCoordinatorEmail').show();
            $('#TotalCost').show();
            $('#IITMCost').show();
        }

        $('#collabcoordname').val('')
        $('#collabagency').val('')
        $('#collabcoordemail').val('')
        $('#collabtotalcost').val('')
        $('#collabIITMCost').val('')
    });

    $('[id^="Jointdevelop_"]').each(function () {
        var ID = $(this).attr("id");
        var qustType = ID.substr(ID.lastIndexOf("_") + 1);
        var qustNo = ID.substring(ID.indexOf("_") + 1, ID.lastIndexOf("_"));

        if (qustType === "yes") {
            $('#jointdevelopmentdetail').css("display", "block");
        }
        if (qustType === "no") {
            $('#jointdevelopmentdetail').css("display", "none");
        }
        $('#jointdevelopmentcompany').val('');
        $('#jointdevelopmentremarks').val('');

    });
    $('[id^="Jointdevelop_"]').change(function () {
        var ID = $(this).attr("id");
        var qustType = ID.substr(ID.lastIndexOf("_") + 1);
        var qustNo = ID.substring(ID.indexOf("_") + 1, ID.lastIndexOf("_"));

        if (qustType === "yes") {
            $('#jointdevelopmentdetail').css("display", "block");
        }
        if (qustType === "no") {
            $('#jointdevelopmentdetail').css("display", "none");
        }
        $('#jointdevelopmentcompany').val('');
        $('#jointdevelopmentremarks').val('');

    });

    $(document).on('click', '#divjointdevelopContent button[name="removeButton"]', function () {
        $(this).parent().parent("Div").remove();
    });

    $('#btnAddcompany').click(function () {
        var cln = $("#primaryjoindevelopDiv").clone().find("input").val("").end();
        $(cln).find('.dis-none').removeClass('dis-none');
        $('#divjointdevelopContent').append(cln)

    });
    $("#constaxtype").change(function () {
        var taxtype = $(this).val();
        var taxdocname = $("#proofdocfile").val();

        if (taxtype == 1) {
            $('#reasonfornotax').hide();
            $('#proofofnotax').hide();
            $('#proofofnotaxlink').hide();
            $('#taxnumberdtls').show();
            $('#TaxException').val('False');
        }
        if (taxtype == 2 || taxtype == 3 || taxtype == 4) {
            $('#reasonfornotax').show();
            $('#proofofnotax').show();
            $('#proofofnotaxlink').show();
            $('#taxnumberdtls').show();
            $('#TaxException').val('True');
            //if(taxdocname == null || taxdocname == "")
            //{
            //    isValid = false;
            //    $('#MsgValidation').html("It is mandatory to attach document proof for no tax");
            //    $('#ValidationModal').modal('toggle');
            //    return false;
            //}
        }

    });
    $('.conforgnPrjctDet').css("display", "none");
    $("#consprjctfundingtype").change(function () {
        var type = $(this).val();
        $('#ConsFundTypeForgnAndBoth').val('False')
        if (type == 1) {
            $('.conforgnPrjctDet').css("display", "none");
        }
        if (type == 2) {
            $('.conforgnPrjctDet').css("display", "block");
            $('#ConsFundTypeForgnAndBoth').val('True')
        }
        if (type == 3) {
            $('.conforgnPrjctDet').css("display", "block");
            $('#ConsFundTypeForgnAndBoth').val('True')
        }
        if (type == 0) {
            $('.conforgnPrjctDet').css("display", "none");

        }
        //$('#forgncurrencytype').val('');
    });

    $('[id^="JointDevelopment_"]').each(function () {
        var ID = $(this).attr("id");
        var qustType = ID.substr(ID.lastIndexOf("_") + 1);
        var qustNo = ID.substring(ID.indexOf("_") + 1, ID.lastIndexOf("_"));

        if (qustType === "yes") {
            $('#jointdevelopmentdetail').css("display", "block");
        }
        if (qustType === "no") {
            $('#jointdevelopmentdetail').css("display", "none");
        }
    });

    /* Tab Sections Start*/
    var currentTab = 0; // Current tab is set to be the first tab (0)
    showTab(currentTab); // Display the crurrent tab
    function showTab(n) {
        // This function will display the specified tab of the form...
        var x = document.getElementsByClassName("tab");
        x[n].style.display = "block";
        $(".custom-nav-pills li:eq(" + n + ")").addClass("active");
        //... and fix the Previous/Next buttons:
        if (n == 0) {
            document.getElementById("prevBtn").style.display = "none";
        } else {
            document.getElementById("prevBtn").style.display = "inline";
        }
        if (n == (x.length - 1)) {
            document.getElementById("nextBtn").innerHTML = "Submit";
            $('#nextBtn').hide();
        } else {
            document.getElementById("nextBtn").innerHTML = "Next";
            $('#nextBtn').show();
        }
        //... and run a function that will display the correct step indicator:
        //fixStepIndicator(n)
    }

    function nextPrev(n) {
        // This function will figure out which tab to display
        var x = document.getElementsByClassName("tab");
        // Exit the function if any field in the current tab is invalid:
        //if (n > 0 && !validateForm(n)) return false;
        if (currentTab + n < x.length) {
            // Hide the current tab:
            x[currentTab].style.display = "none";
            $(".custom-nav-pills li:eq(" + currentTab + ")").removeClass("active");
        } else {
            // ... the form gets submitted:
            formSave();
            return false;
        }
        // Increase or decrease the current tab by 1:
        currentTab = currentTab + n;

        // Otherwise, display the correct tab:
        showTab(currentTab);
    }
    function validateYWAllocation() {
        var msg = 'valid';
        var ttlAllowVal = 0;
        var ttlEMIVal = 0;
        var budgetVal = parseFloat($('#basevalue').val());
        $("div#YWtabs .tab-content .tab-pane:not(:last-child)").each(function (i, item) {
            var year = $(item).attr('id');
            var ttlEMIValOfYear = 0;
            var EMIOfYear = parseFloat($(item).find('input[name $=".EMIValueForYear"]').val());
            var allocatedheads = [];
            $(item).find('select[name$=".AllocationHeadYW"]').each(function (idx, val) { allocatedheads.push($(val).val()); });
            $(item).find('input[name $=".AllocationValueYW"]').each(function () {
                var parseVal = parseFloat($(this).val());
                if (!isNaN(parseVal))
                    ttlAllowVal = ttlAllowVal + parseVal;
            });
            $(item).find('input[name $=".EMIValue"]').each(function () {
                var parseVal = parseFloat($(this).val());
                if (!isNaN(parseVal)) {
                    ttlEMIVal = ttlEMIVal + parseVal;
                    ttlEMIValOfYear = ttlEMIValOfYear + parseVal;
                }
            });
            var preCount = allocatedheads.length;
            jQuery.unique(allocatedheads);
            if (preCount != allocatedheads.length) {
                msg = 'Duplicate allocation head exist in ' + year + '. Please select a different allocation.';
                return false;
            }
            if (ttlEMIValOfYear > 0 && ttlEMIValOfYear != EMIOfYear) {
                msg = 'Sum of No of Installment values is different from total installment value for ' + year + '.';
                return false;
            }
        });
        if (msg == 'valid') {
            if (ttlEMIVal > 0 && ttlEMIVal != budgetVal) {
                msg = 'Overall installment values is different from project value.';
            } else if (ttlAllowVal != budgetVal) {
                msg = 'Overall allocation values is different from project value.';
            }
        }
        return msg;
    }
    function validateAllocation() {
        var msg = 'valid';
        var ttlAllowVal = 0;
        var ttlEMIVal = 0;
        var budgetVal = parseFloat($('#basevalue').val());
        $("div#OAHead input[name ='Allocationvalue']").each(function () {
            var parseVal = parseFloat($(this).val());
            if (!isNaN(parseVal))
                ttlAllowVal = ttlAllowVal + parseVal;
        });
        $("div#OAHead input[name ='ArrayEMIValue']").each(function () {
            var parseVal = parseFloat($(this).val());
            if (!isNaN(parseVal))
                ttlEMIVal = ttlEMIVal + parseVal;
        });
        if (ttlEMIVal > 0 && ttlEMIVal != budgetVal) {
            msg = 'Overall installment values is different from project value.';
        } else if (ttlAllowVal > 0 && ttlAllowVal != budgetVal) {
            msg = 'Overall allocation values is different from project value.';
        }
        return msg;
    }
    function validateStaffSalary() {
        var msg = 'valid';
        var ttlAllowVal = 0;
        if ($('#IsYearWiseAllocation').is(":checked")) {
            $('#YWtabs .tab-content .tab-pane').not(':last').each(function (index,elePane) {
                $(elePane).find('div[name="primaryAllocateDiv"]').each(function (idx, ele) {
                    var headType = $(ele).find("select[name$='.AllocationHeadYW']").val();
                    if (headType == 1) {
                        var parseVal = parseFloat($(ele).find("input[name $= '.AllocationValueYW']").val())
                        if (!isNaN(parseVal)) {
                            ttlAllowVal = ttlAllowVal + parseVal;
                        }
                    }
                });
            });
        } else {
            $("div#OAHead #primaryAllocateDiv").each(function (idx, ele) {
                var headType = $(ele).find("select[name = 'Allocationhead']").val();
                if (headType == 1) {
                    var parseVal = parseFloat($(ele).find("input[name = 'Allocationvalue']").val())
                    if (!isNaN(parseVal)) {
                        ttlAllowVal = ttlAllowVal + parseVal;
                    }
                }
            });
        }
        var ttlSalary = 0;
        $("input[name ='SalaryofStaffs']").each(function () {
            var parseVal = parseFloat($(this).val());
            if (!isNaN(parseVal))
                ttlSalary = ttlSalary + parseVal;
        });
        if (ttlSalary > ttlAllowVal) {
            msg = 'Sum of staff salary should not be greater than allocated value.';
        }
        return msg;
    }
    function validateFundingBodyAllocation() {
        var msg = 'valid';
        var ttlFundingBodyVal = 0;
        var budgetVal = parseFloat($('#basevalue').val());
        $("div#prjcttypespon input[name $='Amount']").each(function () {
            var parseVal = parseFloat($(this).val());
            if (!isNaN(parseVal))
                ttlFundingBodyVal = ttlFundingBodyVal + parseVal;
        });
        if (ttlFundingBodyVal != budgetVal) {
            msg = 'Overall funding body allocation values is different from project value.';
        }
        return msg;
    }
    function CollaborativeShareValidation() {
        var msg = 'valid';
        var budgetVal = parseFloat($('#basevalue').val());
        var ttlShare = 0;
        var collShare = parseFloat($("#collabtotalcost").val());
        if (!isNaN(collShare))
            ttlShare = ttlShare + collShare;
        var iitmShare = parseFloat($("#collabIITMCost").val());
        if (!isNaN(iitmShare))
            ttlShare = ttlShare + iitmShare;
        if (ttlShare != budgetVal) {
            msg = 'Sum of other insitute / industry share and iitm share values is different from project value.';
        }
        return msg;
    }
    function validatePCFRMF() {
        var msg = 'valid';
        var ttlPCFPct = 0,ttlRMFPct = 0;
        $("input[name $='PCF']").each(function () {
            var parseVal = parseFloat($(this).val());
            if (!isNaN(parseVal))
                ttlPCFPct = ttlPCFPct + parseVal;
        });
        if (ttlPCFPct > 100) {
            msg = 'Overall PCF allocation percentage should not be greater than 100.';
        }
        $("input[name $='RMF']").each(function () {
            var parseVal = parseFloat($(this).val());
            if (!isNaN(parseVal))
                ttlRMFPct = ttlRMFPct + parseVal;
        });
        if (ttlRMFPct > 100) {
            msg = 'Overall RMF allocation percentage should not be greater than 100.';
        }
        return msg;
    }
    $("#TentativeStartdate, #TentativeClosedate").change(function () {
        calcDateDiff();
    });
    function calcDateDiff() {
        var strDate = $("#TentativeStartdate").val();
        var clsDate = $("#TentativeClosedate").val();
        if (strDate != '' && clsDate != '') {
            var startDate = moment(parseDate(strDate));
            var closeDate = moment(parseDate(clsDate));

            var mins = closeDate.diff(startDate, 'minutes');
            if (mins <= 0) {
                $('#MsgValidation').html("Close Date must be greater than start date.");
                $('#ValidationModal').modal('toggle');
                $("#TentativeClosedate").val('');
                return false;
            }
            //var result = '';
            //var years = closeDate.diff(startDate, 'year');
            //startDate.add(years, 'years');

            //var months = closeDate.diff(startDate, 'months');
            //startDate.add(months, 'months');

            //var days = closeDate.diff(startDate, 'days');
            //if (years > 1) {
            //    result = years + ' years ';
            //} else if (years == 1) {
            //    result = years + ' year ';
            //}
            //if (months > 1) {
            //    result = result + months + ' months ';
            //} else if (months == 1) {
            //    result = result + months + ' month ';
            //}
            //if (days > 1) {
            //    result = result + days + ' days';
            //} else if (days == 1) {
            //    result = result + days + ' day';
            //}
            //$('#lblDuration').html(result);
        }
    }
    //function validateForm(n) {

    //    // This function deals with validation of the form fields
    //    var isValid = false;
    //    var hadError = false;
    //    var tabs = $(".tab");
    //    var currentTabEle = tabs[currentTab];
    //    var inputs = $(":input, textarea, select"); // get all the form inputs and selects
    //    var stepElements = $(currentTabEle).find(inputs); // get inputs for current step
    //    var count = stepElements.length; // check that there are inputs
    //    if (count <= 0) {                // if there are not no reason to loop them
    //        return true;                 // this can be used to perform other action if there are no steps
    //    } else if (currentTab == 3) {
    //        if ($("#typeofproject").val() == 2) {
    //            var validationMsg = CollaborativeShareValidation();
    //            if ( validationMsg != 'valid') {
    //                hadError = true;
    //                $('#MsgValidation').html(validationMsg);
    //                $('#ValidationModal').modal('toggle');
    //            }
    //        }
    //        if ($("#pjctsubtyp").val() == 2) {
    //            var validationMsg = validateFundingBodyAllocation();
    //            if (validationMsg != 'valid') {
    //                hadError = true;
    //                $('#MsgValidation').html(validationMsg);
    //                $('#ValidationModal').modal('toggle');
    //            }
    //        }
    //    } else if (currentTab == 1) {
    //        var validationMsg = validatePCFRMF()
    //        if (validationMsg != 'valid') {
    //            hadError = true;
    //            $('#MsgValidation').html(validationMsg);
    //            $('#ValidationModal').modal('toggle');
    //        }
    //    } else if (currentTab == 4) {
    //        if ($('#IsYearWiseAllocation').is(":checked")) {
    //            var validationMsg = validateYWAllocation()
    //            if (validationMsg != 'valid') {
    //                hadError = true;
    //                $('#MsgValidation').html(validationMsg);
    //                $('#ValidationModal').modal('toggle');
    //            }
    //        } else {
    //            var validationMsg = validateAllocation();
    //            if (validationMsg != 'valid') {
    //                hadError = true;
    //                $('#MsgValidation').html(validationMsg);
    //                $('#ValidationModal').modal('toggle');
    //            }
    //        }
    //    } else if (currentTab == 5) {
    //        var validationMsg = validateStaffSalary();
    //        if (validationMsg != 'valid') {
    //            hadError = true;
    //            $('#MsgValidation').html(validationMsg);
    //            $('#ValidationModal').modal('toggle');
    //        }
    //    }else if (currentTab == 2) {
    //        var projecttype = $('input[name="Prjcttype"]').val();
    //        var taxtype = $("#constaxtype").val();
    //        var taxdocname = $("#proofdocfile").val();
    //        var existsDocPath = $('#Docpathfornotax').val();

    //        if (projecttype == 2 && taxtype == 2) {
    //            if (taxdocname == "" && existsDocPath == '') {
    //                isValid = false;
    //                $('#MsgValidation').html("Please attach document proof for no tax");
    //                $('#ValidationModal').modal('toggle');
    //                return false;
    //            }
    //        }
    //        if (projecttype == 2 && taxtype == 3) {
    //            if (taxdocname == "" && existsDocPath == '') {
    //                isValid = false;
    //                $('#MsgValidation').html("Please attach document proof for tax exemption");
    //                $('#ValidationModal').modal('toggle');
    //                return false;
    //            }
    //        }
    //        if (projecttype == 2 && taxtype == 4) {
    //            if (taxdocname == "" && existsDocPath == '') {
    //                isValid = false;
    //                $('#MsgValidation').html("Please attach document proof for zero rated");
    //                $('#ValidationModal').modal('toggle');
    //                return false;
    //            }
    //        }
    //    }
    //    $(stepElements).each(function (idx) {
    //        if (!$(this).is(':radio') && !$(this).is(':checkbox')) {
    //            isValid = $(this).valid();//$(document.forms[0]).validate().element($(this)); // check that the input is valid. This can also be used on a per input basis to perform another action if the field is not valid.
    //            if (!isValid) { hadError = true; } // set our flag if there was an error
    //        }

    //    });
    //    return !hadError; // return the valid status
    //}

    function fixStepIndicator(n) {
        // This function removes the "active" class of all steps...
        var i, x = document.getElementsByClassName("step");
        for (i = 0; i < x.length; i++) {
            x[i].className = x[i].className.replace(" active", "");
        }
        //... and adds the "active" class on the current step:
        x[n].className += " active";
    }
    /* Tab Sections End */



       



</script>
<link href="@Url.Content("~/Content/IOASContent/assets/bootstrap-select/css/bootstrap-select.min.css")" rel="stylesheet" />
<script src="@Url.Content("~/Content/IOASContent/assets/bootstrap-select/js/bootstrap-select.min.js")"></script>
@*<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/FoolProof/mvcfoolproof.unobtrusive.min.js")" type="text/javascript"></script>*@